# ğŸ¤– Sistema de Conversas & AI Agents

> **Plataforma completa de atendimento multicanal com InteligÃªncia Artificial**

[![Status](https://img.shields.io/badge/Status-Operacional-brightgreen)]()
[![VersÃ£o](https://img.shields.io/badge/VersÃ£o-1.0-blue)]()
[![DocumentaÃ§Ã£o](https://img.shields.io/badge/DocumentaÃ§Ã£o-Completa-success)]()

---

## ğŸ“– O QUE Ã‰?

Sistema **multiatendimento multicanal** que combina **Agentes Humanos** e **Agentes de IA** (OpenAI GPT-4/3.5) para atender clientes em tempo real atravÃ©s de WhatsApp, Instagram, Telegram e outros canais.

### âœ¨ Principais Recursos

- ğŸ¤– **AI Agents** - Bots inteligentes usando OpenAI
- ğŸ› ï¸ **Function Calling** - IA pode usar ferramentas (buscar pedidos, APIs, etc)
- ğŸ”„ **DistribuiÃ§Ã£o AutomÃ¡tica** - Round-robin, por carga, performance
- ğŸ’¬ **Multicanal** - WhatsApp, Instagram, Telegram
- âš¡ **Tempo Real** - WebSocket + Polling
- ğŸ“Š **Analytics** - Tokens, custos, mÃ©tricas completas
- ğŸ¯ **AI Branching** - Roteamento inteligente por intents
- ğŸ’° **Controle de Custos** - Rate limiting, limites configurÃ¡veis

---

## ğŸš€ INÃCIO RÃPIDO

### 1. Primeira Leitura (15 minutos)

ğŸ‘‰ Comece por aqui: **[RESUMO_RAPIDO_SISTEMA_AI.md](RESUMO_RAPIDO_SISTEMA_AI.md)**

VocÃª vai aprender:
- Conceitos bÃ¡sicos
- Fluxo de mensagem
- Como criar/atribuir AI Agents
- Comandos essenciais

### 2. Entender Visualmente (10 minutos)

ğŸ‘‰ Veja os diagramas: **[DIAGRAMAS_VISUAIS_SISTEMA_AI.md](DIAGRAMAS_VISUAIS_SISTEMA_AI.md)**

14 diagramas explicando:
- Fluxo completo de mensagem
- Arquitetura do sistema
- Modelo de dados
- Processamento OpenAI
- E muito mais...

### 3. Ver na PrÃ¡tica (20 minutos)

ğŸ‘‰ Analise logs reais: **[ANALISE_LOGS_SISTEMA.md](ANALISE_LOGS_SISTEMA.md)**

Entenda:
- Como uma conversa real funciona
- O que cada log significa
- Como debugar problemas
- MÃ©tricas e custos

---

## ğŸ“š DOCUMENTAÃ‡ÃƒO COMPLETA

### ğŸ“‘ Ãndice Geral

**[INDICE_DOCUMENTACAO_SISTEMA_AI.md](INDICE_DOCUMENTACAO_SISTEMA_AI.md)**

Seu mapa completo da documentaÃ§Ã£o com:
- NavegaÃ§Ã£o por objetivo
- Ãndice remissivo
- Roteiros de estudo
- Links rÃ¡pidos

### ğŸ“– Documentos DisponÃ­veis

| Documento | DescriÃ§Ã£o | Quando Usar |
|-----------|-----------|-------------|
| **[SISTEMA_COMPLETO_CONVERSATIONS_AI_AGENTS.md](SISTEMA_COMPLETO_CONVERSATIONS_AI_AGENTS.md)** | DocumentaÃ§Ã£o tÃ©cnica completa (1000+ linhas) | Desenvolvimento, manutenÃ§Ã£o, arquitetura |
| **[RESUMO_RAPIDO_SISTEMA_AI.md](RESUMO_RAPIDO_SISTEMA_AI.md)** | Guia de referÃªncia rÃ¡pida | Consultas rÃ¡pidas, comandos, troubleshooting |
| **[ANALISE_LOGS_SISTEMA.md](ANALISE_LOGS_SISTEMA.md)** | AnÃ¡lise de logs reais | Debug, aprender com exemplos |
| **[DIAGRAMAS_VISUAIS_SISTEMA_AI.md](DIAGRAMAS_VISUAIS_SISTEMA_AI.md)** | 14 diagramas visuais (Mermaid) | Visualizar fluxos, explicar sistema |
| **[FAQ_SISTEMA_AI_AGENTS.md](FAQ_SISTEMA_AI_AGENTS.md)** | 70+ perguntas e respostas | DÃºvidas pontuais, troubleshooting |
| **[INDICE_DOCUMENTACAO_SISTEMA_AI.md](INDICE_DOCUMENTACAO_SISTEMA_AI.md)** | Ãndice organizador | Navegar pela documentaÃ§Ã£o |

---

## ğŸ’¡ CASOS DE USO

### Por Perfil

#### ğŸ‘¨â€ğŸ’¼ **Gerente/Product Owner**
1. Leia: **[RESUMO_RAPIDO](RESUMO_RAPIDO_SISTEMA_AI.md)** (SeÃ§Ã£o: VisÃ£o Geral)
2. Veja: **[DIAGRAMAS](DIAGRAMAS_VISUAIS_SISTEMA_AI.md)** (Diagramas 1, 2)
3. Entenda custos: **[FAQ](FAQ_SISTEMA_AI_AGENTS.md)** (SeÃ§Ã£o: Custos)

#### ğŸ‘¨â€ğŸ’» **Desenvolvedor**
1. Estude: **[SISTEMA_COMPLETO](SISTEMA_COMPLETO_CONVERSATIONS_AI_AGENTS.md)** (Completo)
2. Veja: **[DIAGRAMAS](DIAGRAMAS_VISUAIS_SISTEMA_AI.md)** (Todos)
3. Pratique: Exemplos em **[SISTEMA_COMPLETO](SISTEMA_COMPLETO_CONVERSATIONS_AI_AGENTS.md)** (SeÃ§Ã£o 11)

#### ğŸ”§ **DevOps/SysAdmin**
1. Configure: **[RESUMO_RAPIDO](RESUMO_RAPIDO_SISTEMA_AI.md)** (SeÃ§Ã£o: ConfiguraÃ§Ãµes)
2. Monitore: **[ANALISE_LOGS](ANALISE_LOGS_SISTEMA.md)** (SeÃ§Ã£o: Logs)
3. Otimize: **[FAQ](FAQ_SISTEMA_AI_AGENTS.md)** (SeÃ§Ã£o: Performance)

#### ğŸ¯ **Suporte/QA**
1. Aprenda: **[RESUMO_RAPIDO](RESUMO_RAPIDO_SISTEMA_AI.md)** (Completo)
2. Resolva: **[FAQ](FAQ_SISTEMA_AI_AGENTS.md)** (SeÃ§Ã£o: Troubleshooting)
3. Debug: **[ANALISE_LOGS](ANALISE_LOGS_SISTEMA.md)** (SeÃ§Ã£o 2)

---

## ğŸ¯ EXEMPLOS RÃPIDOS

### Criar AI Agent

```php
use App\Services\AIAgentService;

$agentId = AIAgentService::create([
    'name' => 'Atendente Virtual',
    'description' => 'Agente de suporte',
    'agent_type' => 'CS',
    'prompt' => 'VocÃª Ã© um assistente prestativo...',
    'model' => 'gpt-3.5-turbo',
    'temperature' => 0.7,
    'max_tokens' => 2000,
    'max_conversations' => 0,  // Ilimitado
    'enabled' => true
]);
```

### Atribuir IA Ã  Conversa

```php
use App\Services\ConversationAIService;

ConversationAIService::addAIAgent(474, [
    'ai_agent_id' => 21,
    'process_immediately' => true,
    'assume_conversation' => true
]);
```

### Ver Status da IA

```php
$status = ConversationAIService::getAIStatus(474);

echo "IA Ativa: " . ($status['has_ai'] ? 'Sim' : 'NÃ£o');
echo "Tokens: " . $status['ai_conversation']['tokens_used'];
echo "Custo: $" . $status['ai_conversation']['cost'];
```

### Consultar Custos

```sql
SELECT 
    ai_agent_id,
    COUNT(*) as conversas,
    SUM(tokens_used) as tokens,
    SUM(cost) as custo_usd
FROM ai_conversations
WHERE created_at >= '2025-12-01'
GROUP BY ai_agent_id;
```

---

## â“ PERGUNTAS FREQUENTES

### ğŸ¤” Como sei se a IA estÃ¡ ativa em uma conversa?

Verifique se existe `ai_conversations` com `status = 'active'`:

```sql
SELECT * FROM ai_conversations 
WHERE conversation_id = 474 
  AND status = 'active';
```

### ğŸ’° Quanto custa usar IA?

- **GPT-3.5-turbo:** ~$0.0005/conversa
- **GPT-4:** ~$0.01/conversa

MÃ©dia de 10-50 conversas por $1.

### ğŸš€ Quantas conversas simultÃ¢neas suporta?

- **Agentes Humanos:** 5-10 por agente
- **Agentes de IA:** Ilimitado (limitado apenas por OpenAI rate limit)

### ğŸ”§ Como debugar problemas?

1. Veja logs: `logs/ai-agents.log`
2. Consulte: **[FAQ_SISTEMA_AI_AGENTS.md](FAQ_SISTEMA_AI_AGENTS.md)** (SeÃ§Ã£o Troubleshooting)
3. Analise exemplo: **[ANALISE_LOGS_SISTEMA.md](ANALISE_LOGS_SISTEMA.md)**

**ğŸ‘‰ Mais 70+ perguntas em:** [FAQ_SISTEMA_AI_AGENTS.md](FAQ_SISTEMA_AI_AGENTS.md)

---

## ğŸ—ºï¸ ROADMAP DE APRENDIZADO

### ğŸŸ¢ NÃ­vel 1: Iniciante (2-3 horas)

**Objetivo:** Entender o bÃ¡sico

```
1. RESUMO_RAPIDO (30 min)
   â†“
2. DIAGRAMAS (Diagramas 1, 2, 3) (45 min)
   â†“
3. ANALISE_LOGS (SeÃ§Ã£o 1) (60 min)
   â†“
4. SISTEMA_COMPLETO (SeÃ§Ãµes 1, 4) (45 min)
```

**âœ… Checkpoint:** Explicar fluxo bÃ¡sico de mensagem

---

### ğŸŸ¡ NÃ­vel 2: IntermediÃ¡rio (4-5 horas)

**Objetivo:** Implementar funcionalidades

```
1. SISTEMA_COMPLETO (SeÃ§Ãµes 3, 5, 6, 11) (2h)
   â†“
2. DIAGRAMAS (4, 5, 6, 8) (1h)
   â†“
3. RESUMO_RAPIDO (SeÃ§Ãµes 7-10) (1h)
   â†“
4. ANALISE_LOGS (SeÃ§Ãµes 2, 3, 4) (1h)
```

**âœ… Checkpoint:** Criar agente, tool, configurar distribuiÃ§Ã£o

---

### ğŸ”´ NÃ­vel 3: AvanÃ§ado (6-8 horas)

**Objetivo:** Dominar completamente

```
1. SISTEMA_COMPLETO (Completo + Exemplos) (3h)
   â†“
2. DIAGRAMAS (Todos) (2h)
   â†“
3. ANALISE_LOGS (Completo + Implementar recomendaÃ§Ãµes) (2h)
   â†“
4. PrÃ¡tica (Criar 3 agentes, 5 tools, testar) (1-2h)
```

**âœ… Checkpoint:** Otimizar sistema, criar funcionalidades avanÃ§adas

---

## ğŸ“Š ESTATÃSTICAS DO SISTEMA

### Status Atual (31/12/2025)

- âœ… **Funcional:** 100%
- ğŸ“± **Canais:** WhatsApp (Quepasa)
- ğŸ¤– **AI Provider:** OpenAI (GPT-4, GPT-3.5-turbo)
- ğŸ› ï¸ **Tools:** WooCommerce, N8N, Database, API, System
- âš¡ **Realtime:** Polling (WebSocket suportado)
- ğŸ’¾ **Database:** MySQL 8.0+
- ğŸ˜ **PHP:** 8.1+

### Performance

- âš¡ **Resposta IA:** 1-5s
- ğŸ’° **Custo mÃ©dio:** $0.001-0.01/conversa
- ğŸ”„ **Processamento:** AssÃ­ncrono
- ğŸ“Š **Monitoramento:** Logs completos

---

## ğŸ¤ CONTRIBUINDO

### Melhorar DocumentaÃ§Ã£o

Encontrou algo que pode ser melhorado?

1. Identifique o documento
2. Sugira alteraÃ§Ãµes
3. Mantenha formataÃ§Ã£o consistente
4. Atualize Ã­ndices se necessÃ¡rio

### Reportar Problemas

Encontrou um bug ou tem dÃºvida?

1. Verifique **[FAQ](FAQ_SISTEMA_AI_AGENTS.md)** primeiro
2. Consulte **[Troubleshooting](RESUMO_RAPIDO_SISTEMA_AI.md)** (SeÃ§Ã£o 13)
3. Veja **[AnÃ¡lise de Logs](ANALISE_LOGS_SISTEMA.md)**
4. Abra issue ou entre em contato

---

## ğŸ“ SUPORTE

### Recursos de Ajuda

1. **ğŸ“– DocumentaÃ§Ã£o** - Leia este README e documentos linkados
2. **â“ FAQ** - [70+ perguntas respondidas](FAQ_SISTEMA_AI_AGENTS.md)
3. **ğŸ“Š Logs** - Analise em `logs/` ou [guia de anÃ¡lise](ANALISE_LOGS_SISTEMA.md)
4. **ğŸ” Debug** - [Guia de troubleshooting](RESUMO_RAPIDO_SISTEMA_AI.md#-troubleshooting)

### Contato

Para suporte direto, entre em contato com o time de desenvolvimento.

---

## ğŸ“„ LICENÃ‡A

Este sistema Ã© proprietÃ¡rio e confidencial.

---

## ğŸ“ PRÃ“XIMOS PASSOS

### ğŸ‘‰ Para ComeÃ§ar AGORA

1. **Leia:** [RESUMO_RAPIDO_SISTEMA_AI.md](RESUMO_RAPIDO_SISTEMA_AI.md) (15 min)
2. **Veja:** [DIAGRAMAS_VISUAIS_SISTEMA_AI.md](DIAGRAMAS_VISUAIS_SISTEMA_AI.md) (10 min)
3. **Pratique:** Criar seu primeiro AI Agent (30 min)

### ğŸ“š Para Aprofundar

1. **Estude:** [SISTEMA_COMPLETO_CONVERSATIONS_AI_AGENTS.md](SISTEMA_COMPLETO_CONVERSATIONS_AI_AGENTS.md)
2. **Consulte:** [FAQ_SISTEMA_AI_AGENTS.md](FAQ_SISTEMA_AI_AGENTS.md)
3. **Explore:** [ANALISE_LOGS_SISTEMA.md](ANALISE_LOGS_SISTEMA.md)

### ğŸ—ºï¸ Para Navegar

Use o **[ÃNDICE COMPLETO](INDICE_DOCUMENTACAO_SISTEMA_AI.md)** como seu mapa.

---

## â­ DESTAQUES

### ğŸ† DocumentaÃ§Ã£o Completa

- âœ… 6 documentos especializados
- âœ… 1000+ linhas de conteÃºdo tÃ©cnico
- âœ… 14 diagramas visuais (Mermaid)
- âœ… 70+ perguntas e respostas
- âœ… Exemplos prÃ¡ticos reais
- âœ… AnÃ¡lise de logs detalhada
- âœ… Guias de troubleshooting

### ğŸ¯ Para Todos os Perfis

- ğŸ‘¨â€ğŸ’¼ **Gestores** - VisÃ£o estratÃ©gica
- ğŸ‘¨â€ğŸ’» **Desenvolvedores** - ImplementaÃ§Ã£o tÃ©cnica
- ğŸ”§ **DevOps** - ConfiguraÃ§Ã£o e monitoramento
- ğŸ¯ **Suporte** - ResoluÃ§Ã£o de problemas

### ğŸ“ˆ Sempre Atualizado

**Ãšltima atualizaÃ§Ã£o:** 31/12/2025  
**VersÃ£o da documentaÃ§Ã£o:** 1.0  
**Status:** Completo e operacional

---

**ğŸš€ Comece agora:** [RESUMO_RAPIDO_SISTEMA_AI.md](RESUMO_RAPIDO_SISTEMA_AI.md)

---

<div align="center">

**Feito com â¤ï¸ pela equipe de desenvolvimento**

[![DocumentaÃ§Ã£o](https://img.shields.io/badge/ğŸ“–-DocumentaÃ§Ã£o-blue)](INDICE_DOCUMENTACAO_SISTEMA_AI.md)
[![FAQ](https://img.shields.io/badge/â“-FAQ-green)](FAQ_SISTEMA_AI_AGENTS.md)
[![Diagramas](https://img.shields.io/badge/ğŸ“Š-Diagramas-purple)](DIAGRAMAS_VISUAIS_SISTEMA_AI.md)

</div>
