[2025-12-05 13:56:26] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 13:56:26] [DEBUG] GET params | Context: {"search":"sa"}
[2025-12-05 13:56:26] [ERROR] Erro em Conversation::getAll: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 13:56:26] [ERROR] SQL: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as last_message,
                       (SELECT created_at FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as last_message_at,
                       GROUP_CONCAT(DISTINCT CONCAT(t.id, ':', t.name, ':', COALESCE(t.color, '#009ef7')) SEPARATOR '|||') as tags_data,
                       COALESCE(c.pinned, 0) as pinned,
                       c.pinned_at
                FROM conversations c
                LEFT JOIN contacts ct ON c.contact_id = ct.id
                LEFT JOIN users u ON c.agent_id = u.id
                LEFT JOIN conversation_tags ctt ON c.id = ctt.conversation_id
                LEFT JOIN tags t ON ctt.tag_id = t.id
                WHERE 1=1 AND (
                ct.name LIKE ? OR 
                ct.phone LIKE ? OR 
                ct.email LIKE ? OR 
                c.subject LIKE ? OR
                EXISTS (
                    SELECT 1 FROM messages m 
                    WHERE m.conversation_id = c.id 
                    AND m.content LIKE ?
                )
            ) GROUP BY c.id ORDER BY c.pinned DESC, c.pinned_at DESC, c.updated_at DESC LIMIT 50 OFFSET 0
[2025-12-05 13:56:26] [ERROR] Params | Context: ["%sa%","%sa%","%sa%","%sa%","%sa%"]
[2025-12-05 13:56:26] [ERROR] Filtros | Context: {"search":"sa","limit":50,"offset":0}
[2025-12-05 13:56:26] [ERROR] Erro em ConversationService::list: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 13:56:26] [ERROR] Filtros | Context: {"search":"sa","limit":50,"offset":0}
[2025-12-05 13:56:26] [ERROR] Stack trace: #0 C:\laragon\www\chat\app\Helpers\Database.php(62): PDO->prepare('SELECT c.*, \r\n ...')
#1 C:\laragon\www\chat\app\Helpers\Database.php(82): App\Helpers\Database::query('SELECT c.*, \r\n ...', Array)
#2 C:\laragon\www\chat\app\Models\Conversation.php(219): App\Helpers\Database::fetchAll('SELECT c.*, \r\n ...', Array)
#3 C:\laragon\www\chat\app\Services\ConversationService.php(165): App\Models\Conversation::getAll(Array)
#4 C:\laragon\www\chat\app\Controllers\ConversationController.php(66): App\Services\ConversationService::list(Array, 1)
#5 [internal function]: App\Controllers\ConversationController->index()
#6 C:\laragon\www\chat\app\Helpers\Router.php(209): call_user_func_array(Array, Array)
#7 C:\laragon\www\chat\app\Helpers\Router.php(133): App\Helpers\Router::callController(Array, Array)
#8 C:\laragon\www\chat\public\index.php(32): App\Helpers\Router::dispatch()
#9 {main}
[2025-12-05 13:56:26] [ERROR] Erro no ConversationController::index: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 13:56:26] [ERROR] Stack trace: #0 C:\laragon\www\chat\app\Helpers\Database.php(62): PDO->prepare('SELECT c.*, \r\n ...')
#1 C:\laragon\www\chat\app\Helpers\Database.php(82): App\Helpers\Database::query('SELECT c.*, \r\n ...', Array)
#2 C:\laragon\www\chat\app\Models\Conversation.php(219): App\Helpers\Database::fetchAll('SELECT c.*, \r\n ...', Array)
#3 C:\laragon\www\chat\app\Services\ConversationService.php(165): App\Models\Conversation::getAll(Array)
#4 C:\laragon\www\chat\app\Controllers\ConversationController.php(66): App\Services\ConversationService::list(Array, 1)
#5 [internal function]: App\Controllers\ConversationController->index()
#6 C:\laragon\www\chat\app\Helpers\Router.php(209): call_user_func_array(Array, Array)
#7 C:\laragon\www\chat\app\Helpers\Router.php(133): App\Helpers\Router::callController(Array, Array)
#8 C:\laragon\www\chat\public\index.php(32): App\Helpers\Router::dispatch()
#9 {main}
[2025-12-05 13:57:26] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 13:57:26] [DEBUG] GET params | Context: {"search":"sa"}
[2025-12-05 13:57:26] [ERROR] Erro em Conversation::getAll: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 13:57:26] [ERROR] SQL: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as last_message,
                       (SELECT created_at FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as last_message_at,
                       GROUP_CONCAT(DISTINCT CONCAT(t.id, ':', t.name, ':', COALESCE(t.color, '#009ef7')) SEPARATOR '|||') as tags_data,
                       COALESCE(c.pinned, 0) as pinned,
                       c.pinned_at
                FROM conversations c
                LEFT JOIN contacts ct ON c.contact_id = ct.id
                LEFT JOIN users u ON c.agent_id = u.id
                LEFT JOIN conversation_tags ctt ON c.id = ctt.conversation_id
                LEFT JOIN tags t ON ctt.tag_id = t.id
                WHERE 1=1 AND (
                ct.name LIKE ? OR 
                ct.phone LIKE ? OR 
                ct.email LIKE ? OR 
                c.subject LIKE ? OR
                EXISTS (
                    SELECT 1 FROM messages m 
                    WHERE m.conversation_id = c.id 
                    AND m.content LIKE ?
                )
            ) GROUP BY c.id ORDER BY c.pinned DESC, c.pinned_at DESC, c.updated_at DESC LIMIT 50 OFFSET 0
[2025-12-05 13:57:26] [ERROR] Params | Context: ["%sa%","%sa%","%sa%","%sa%","%sa%"]
[2025-12-05 13:57:26] [ERROR] Filtros | Context: {"search":"sa","limit":50,"offset":0}
[2025-12-05 13:57:26] [ERROR] Erro em ConversationService::list: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 13:57:26] [ERROR] Filtros | Context: {"search":"sa","limit":50,"offset":0}
[2025-12-05 13:57:26] [ERROR] Stack trace: #0 C:\laragon\www\chat\app\Helpers\Database.php(62): PDO->prepare('SELECT c.*, \r\n ...')
#1 C:\laragon\www\chat\app\Helpers\Database.php(82): App\Helpers\Database::query('SELECT c.*, \r\n ...', Array)
#2 C:\laragon\www\chat\app\Models\Conversation.php(219): App\Helpers\Database::fetchAll('SELECT c.*, \r\n ...', Array)
#3 C:\laragon\www\chat\app\Services\ConversationService.php(165): App\Models\Conversation::getAll(Array)
#4 C:\laragon\www\chat\app\Controllers\ConversationController.php(66): App\Services\ConversationService::list(Array, 1)
#5 [internal function]: App\Controllers\ConversationController->index()
#6 C:\laragon\www\chat\app\Helpers\Router.php(209): call_user_func_array(Array, Array)
#7 C:\laragon\www\chat\app\Helpers\Router.php(133): App\Helpers\Router::callController(Array, Array)
#8 C:\laragon\www\chat\public\index.php(32): App\Helpers\Router::dispatch()
#9 {main}
[2025-12-05 13:57:26] [ERROR] Erro no ConversationController::index: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 13:57:26] [ERROR] Stack trace: #0 C:\laragon\www\chat\app\Helpers\Database.php(62): PDO->prepare('SELECT c.*, \r\n ...')
#1 C:\laragon\www\chat\app\Helpers\Database.php(82): App\Helpers\Database::query('SELECT c.*, \r\n ...', Array)
#2 C:\laragon\www\chat\app\Models\Conversation.php(219): App\Helpers\Database::fetchAll('SELECT c.*, \r\n ...', Array)
#3 C:\laragon\www\chat\app\Services\ConversationService.php(165): App\Models\Conversation::getAll(Array)
#4 C:\laragon\www\chat\app\Controllers\ConversationController.php(66): App\Services\ConversationService::list(Array, 1)
#5 [internal function]: App\Controllers\ConversationController->index()
#6 C:\laragon\www\chat\app\Helpers\Router.php(209): call_user_func_array(Array, Array)
#7 C:\laragon\www\chat\app\Helpers\Router.php(133): App\Helpers\Router::callController(Array, Array)
#8 C:\laragon\www\chat\public\index.php(32): App\Helpers\Router::dispatch()
#9 {main}
[2025-12-05 13:58:26] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 13:58:26] [DEBUG] GET params | Context: {"search":"sa"}
[2025-12-05 13:58:26] [ERROR] Erro em Conversation::getAll: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 13:58:26] [ERROR] SQL: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as last_message,
                       (SELECT created_at FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as last_message_at,
                       GROUP_CONCAT(DISTINCT CONCAT(t.id, ':', t.name, ':', COALESCE(t.color, '#009ef7')) SEPARATOR '|||') as tags_data,
                       COALESCE(c.pinned, 0) as pinned,
                       c.pinned_at
                FROM conversations c
                LEFT JOIN contacts ct ON c.contact_id = ct.id
                LEFT JOIN users u ON c.agent_id = u.id
                LEFT JOIN conversation_tags ctt ON c.id = ctt.conversation_id
                LEFT JOIN tags t ON ctt.tag_id = t.id
                WHERE 1=1 AND (
                ct.name LIKE ? OR 
                ct.phone LIKE ? OR 
                ct.email LIKE ? OR 
                c.subject LIKE ? OR
                EXISTS (
                    SELECT 1 FROM messages m 
                    WHERE m.conversation_id = c.id 
                    AND m.content LIKE ?
                )
            ) GROUP BY c.id ORDER BY c.pinned DESC, c.pinned_at DESC, c.updated_at DESC LIMIT 50 OFFSET 0
[2025-12-05 13:58:26] [ERROR] Params | Context: ["%sa%","%sa%","%sa%","%sa%","%sa%"]
[2025-12-05 13:58:26] [ERROR] Filtros | Context: {"search":"sa","limit":50,"offset":0}
[2025-12-05 13:58:26] [ERROR] Erro em ConversationService::list: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 13:58:26] [ERROR] Filtros | Context: {"search":"sa","limit":50,"offset":0}
[2025-12-05 13:58:26] [ERROR] Stack trace: #0 C:\laragon\www\chat\app\Helpers\Database.php(62): PDO->prepare('SELECT c.*, \r\n ...')
#1 C:\laragon\www\chat\app\Helpers\Database.php(82): App\Helpers\Database::query('SELECT c.*, \r\n ...', Array)
#2 C:\laragon\www\chat\app\Models\Conversation.php(219): App\Helpers\Database::fetchAll('SELECT c.*, \r\n ...', Array)
#3 C:\laragon\www\chat\app\Services\ConversationService.php(165): App\Models\Conversation::getAll(Array)
#4 C:\laragon\www\chat\app\Controllers\ConversationController.php(66): App\Services\ConversationService::list(Array, 1)
#5 [internal function]: App\Controllers\ConversationController->index()
#6 C:\laragon\www\chat\app\Helpers\Router.php(209): call_user_func_array(Array, Array)
#7 C:\laragon\www\chat\app\Helpers\Router.php(133): App\Helpers\Router::callController(Array, Array)
#8 C:\laragon\www\chat\public\index.php(32): App\Helpers\Router::dispatch()
#9 {main}
[2025-12-05 13:58:26] [ERROR] Erro no ConversationController::index: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 13:58:26] [ERROR] Stack trace: #0 C:\laragon\www\chat\app\Helpers\Database.php(62): PDO->prepare('SELECT c.*, \r\n ...')
#1 C:\laragon\www\chat\app\Helpers\Database.php(82): App\Helpers\Database::query('SELECT c.*, \r\n ...', Array)
#2 C:\laragon\www\chat\app\Models\Conversation.php(219): App\Helpers\Database::fetchAll('SELECT c.*, \r\n ...', Array)
#3 C:\laragon\www\chat\app\Services\ConversationService.php(165): App\Models\Conversation::getAll(Array)
#4 C:\laragon\www\chat\app\Controllers\ConversationController.php(66): App\Services\ConversationService::list(Array, 1)
#5 [internal function]: App\Controllers\ConversationController->index()
#6 C:\laragon\www\chat\app\Helpers\Router.php(209): call_user_func_array(Array, Array)
#7 C:\laragon\www\chat\app\Helpers\Router.php(133): App\Helpers\Router::callController(Array, Array)
#8 C:\laragon\www\chat\public\index.php(32): App\Helpers\Router::dispatch()
#9 {main}
[2025-12-05 13:59:26] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 13:59:26] [DEBUG] GET params | Context: {"search":"sa"}
[2025-12-05 13:59:26] [ERROR] Erro em Conversation::getAll: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 13:59:26] [ERROR] SQL: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as last_message,
                       (SELECT created_at FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as last_message_at,
                       GROUP_CONCAT(DISTINCT CONCAT(t.id, ':', t.name, ':', COALESCE(t.color, '#009ef7')) SEPARATOR '|||') as tags_data,
                       COALESCE(c.pinned, 0) as pinned,
                       c.pinned_at
                FROM conversations c
                LEFT JOIN contacts ct ON c.contact_id = ct.id
                LEFT JOIN users u ON c.agent_id = u.id
                LEFT JOIN conversation_tags ctt ON c.id = ctt.conversation_id
                LEFT JOIN tags t ON ctt.tag_id = t.id
                WHERE 1=1 AND (
                ct.name LIKE ? OR 
                ct.phone LIKE ? OR 
                ct.email LIKE ? OR 
                c.subject LIKE ? OR
                EXISTS (
                    SELECT 1 FROM messages m 
                    WHERE m.conversation_id = c.id 
                    AND m.content LIKE ?
                )
            ) GROUP BY c.id ORDER BY c.pinned DESC, c.pinned_at DESC, c.updated_at DESC LIMIT 50 OFFSET 0
[2025-12-05 13:59:26] [ERROR] Params | Context: ["%sa%","%sa%","%sa%","%sa%","%sa%"]
[2025-12-05 13:59:26] [ERROR] Filtros | Context: {"search":"sa","limit":50,"offset":0}
[2025-12-05 13:59:26] [ERROR] Erro em ConversationService::list: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 13:59:26] [ERROR] Filtros | Context: {"search":"sa","limit":50,"offset":0}
[2025-12-05 13:59:26] [ERROR] Stack trace: #0 C:\laragon\www\chat\app\Helpers\Database.php(62): PDO->prepare('SELECT c.*, \r\n ...')
#1 C:\laragon\www\chat\app\Helpers\Database.php(82): App\Helpers\Database::query('SELECT c.*, \r\n ...', Array)
#2 C:\laragon\www\chat\app\Models\Conversation.php(219): App\Helpers\Database::fetchAll('SELECT c.*, \r\n ...', Array)
#3 C:\laragon\www\chat\app\Services\ConversationService.php(165): App\Models\Conversation::getAll(Array)
#4 C:\laragon\www\chat\app\Controllers\ConversationController.php(66): App\Services\ConversationService::list(Array, 1)
#5 [internal function]: App\Controllers\ConversationController->index()
#6 C:\laragon\www\chat\app\Helpers\Router.php(209): call_user_func_array(Array, Array)
#7 C:\laragon\www\chat\app\Helpers\Router.php(133): App\Helpers\Router::callController(Array, Array)
#8 C:\laragon\www\chat\public\index.php(32): App\Helpers\Router::dispatch()
#9 {main}
[2025-12-05 13:59:26] [ERROR] Erro no ConversationController::index: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 13:59:26] [ERROR] Stack trace: #0 C:\laragon\www\chat\app\Helpers\Database.php(62): PDO->prepare('SELECT c.*, \r\n ...')
#1 C:\laragon\www\chat\app\Helpers\Database.php(82): App\Helpers\Database::query('SELECT c.*, \r\n ...', Array)
#2 C:\laragon\www\chat\app\Models\Conversation.php(219): App\Helpers\Database::fetchAll('SELECT c.*, \r\n ...', Array)
#3 C:\laragon\www\chat\app\Services\ConversationService.php(165): App\Models\Conversation::getAll(Array)
#4 C:\laragon\www\chat\app\Controllers\ConversationController.php(66): App\Services\ConversationService::list(Array, 1)
#5 [internal function]: App\Controllers\ConversationController->index()
#6 C:\laragon\www\chat\app\Helpers\Router.php(209): call_user_func_array(Array, Array)
#7 C:\laragon\www\chat\app\Helpers\Router.php(133): App\Helpers\Router::callController(Array, Array)
#8 C:\laragon\www\chat\public\index.php(32): App\Helpers\Router::dispatch()
#9 {main}
[2025-12-05 14:00:26] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:00:26] [DEBUG] GET params | Context: {"search":"sa"}
[2025-12-05 14:00:26] [ERROR] Erro em Conversation::getAll: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 14:00:26] [ERROR] SQL: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as last_message,
                       (SELECT created_at FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as last_message_at,
                       GROUP_CONCAT(DISTINCT CONCAT(t.id, ':', t.name, ':', COALESCE(t.color, '#009ef7')) SEPARATOR '|||') as tags_data,
                       COALESCE(c.pinned, 0) as pinned,
                       c.pinned_at
                FROM conversations c
                LEFT JOIN contacts ct ON c.contact_id = ct.id
                LEFT JOIN users u ON c.agent_id = u.id
                LEFT JOIN conversation_tags ctt ON c.id = ctt.conversation_id
                LEFT JOIN tags t ON ctt.tag_id = t.id
                WHERE 1=1 AND (
                ct.name LIKE ? OR 
                ct.phone LIKE ? OR 
                ct.email LIKE ? OR 
                c.subject LIKE ? OR
                EXISTS (
                    SELECT 1 FROM messages m 
                    WHERE m.conversation_id = c.id 
                    AND m.content LIKE ?
                )
            ) GROUP BY c.id ORDER BY c.pinned DESC, c.pinned_at DESC, c.updated_at DESC LIMIT 50 OFFSET 0
[2025-12-05 14:00:26] [ERROR] Params | Context: ["%sa%","%sa%","%sa%","%sa%","%sa%"]
[2025-12-05 14:00:26] [ERROR] Filtros | Context: {"search":"sa","limit":50,"offset":0}
[2025-12-05 14:00:26] [ERROR] Erro em ConversationService::list: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 14:00:26] [ERROR] Filtros | Context: {"search":"sa","limit":50,"offset":0}
[2025-12-05 14:00:26] [ERROR] Stack trace: #0 C:\laragon\www\chat\app\Helpers\Database.php(62): PDO->prepare('SELECT c.*, \r\n ...')
#1 C:\laragon\www\chat\app\Helpers\Database.php(82): App\Helpers\Database::query('SELECT c.*, \r\n ...', Array)
#2 C:\laragon\www\chat\app\Models\Conversation.php(219): App\Helpers\Database::fetchAll('SELECT c.*, \r\n ...', Array)
#3 C:\laragon\www\chat\app\Services\ConversationService.php(165): App\Models\Conversation::getAll(Array)
#4 C:\laragon\www\chat\app\Controllers\ConversationController.php(66): App\Services\ConversationService::list(Array, 1)
#5 [internal function]: App\Controllers\ConversationController->index()
#6 C:\laragon\www\chat\app\Helpers\Router.php(209): call_user_func_array(Array, Array)
#7 C:\laragon\www\chat\app\Helpers\Router.php(133): App\Helpers\Router::callController(Array, Array)
#8 C:\laragon\www\chat\public\index.php(32): App\Helpers\Router::dispatch()
#9 {main}
[2025-12-05 14:00:26] [ERROR] Erro no ConversationController::index: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 14:00:26] [ERROR] Stack trace: #0 C:\laragon\www\chat\app\Helpers\Database.php(62): PDO->prepare('SELECT c.*, \r\n ...')
#1 C:\laragon\www\chat\app\Helpers\Database.php(82): App\Helpers\Database::query('SELECT c.*, \r\n ...', Array)
#2 C:\laragon\www\chat\app\Models\Conversation.php(219): App\Helpers\Database::fetchAll('SELECT c.*, \r\n ...', Array)
#3 C:\laragon\www\chat\app\Services\ConversationService.php(165): App\Models\Conversation::getAll(Array)
#4 C:\laragon\www\chat\app\Controllers\ConversationController.php(66): App\Services\ConversationService::list(Array, 1)
#5 [internal function]: App\Controllers\ConversationController->index()
#6 C:\laragon\www\chat\app\Helpers\Router.php(209): call_user_func_array(Array, Array)
#7 C:\laragon\www\chat\app\Helpers\Router.php(133): App\Helpers\Router::callController(Array, Array)
#8 C:\laragon\www\chat\public\index.php(32): App\Helpers\Router::dispatch()
#9 {main}
[2025-12-05 14:01:26] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:01:26] [DEBUG] GET params | Context: {"search":"sa"}
[2025-12-05 14:01:26] [ERROR] Erro em Conversation::getAll: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 14:01:26] [ERROR] SQL: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as last_message,
                       (SELECT created_at FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as last_message_at,
                       GROUP_CONCAT(DISTINCT CONCAT(t.id, ':', t.name, ':', COALESCE(t.color, '#009ef7')) SEPARATOR '|||') as tags_data,
                       COALESCE(c.pinned, 0) as pinned,
                       c.pinned_at
                FROM conversations c
                LEFT JOIN contacts ct ON c.contact_id = ct.id
                LEFT JOIN users u ON c.agent_id = u.id
                LEFT JOIN conversation_tags ctt ON c.id = ctt.conversation_id
                LEFT JOIN tags t ON ctt.tag_id = t.id
                WHERE 1=1 AND (
                ct.name LIKE ? OR 
                ct.phone LIKE ? OR 
                ct.email LIKE ? OR 
                c.subject LIKE ? OR
                EXISTS (
                    SELECT 1 FROM messages m 
                    WHERE m.conversation_id = c.id 
                    AND m.content LIKE ?
                )
            ) GROUP BY c.id ORDER BY c.pinned DESC, c.pinned_at DESC, c.updated_at DESC LIMIT 50 OFFSET 0
[2025-12-05 14:01:26] [ERROR] Params | Context: ["%sa%","%sa%","%sa%","%sa%","%sa%"]
[2025-12-05 14:01:26] [ERROR] Filtros | Context: {"search":"sa","limit":50,"offset":0}
[2025-12-05 14:01:26] [ERROR] Erro em ConversationService::list: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 14:01:26] [ERROR] Filtros | Context: {"search":"sa","limit":50,"offset":0}
[2025-12-05 14:01:26] [ERROR] Stack trace: #0 C:\laragon\www\chat\app\Helpers\Database.php(62): PDO->prepare('SELECT c.*, \r\n ...')
#1 C:\laragon\www\chat\app\Helpers\Database.php(82): App\Helpers\Database::query('SELECT c.*, \r\n ...', Array)
#2 C:\laragon\www\chat\app\Models\Conversation.php(219): App\Helpers\Database::fetchAll('SELECT c.*, \r\n ...', Array)
#3 C:\laragon\www\chat\app\Services\ConversationService.php(165): App\Models\Conversation::getAll(Array)
#4 C:\laragon\www\chat\app\Controllers\ConversationController.php(66): App\Services\ConversationService::list(Array, 1)
#5 [internal function]: App\Controllers\ConversationController->index()
#6 C:\laragon\www\chat\app\Helpers\Router.php(209): call_user_func_array(Array, Array)
#7 C:\laragon\www\chat\app\Helpers\Router.php(133): App\Helpers\Router::callController(Array, Array)
#8 C:\laragon\www\chat\public\index.php(32): App\Helpers\Router::dispatch()
#9 {main}
[2025-12-05 14:01:26] [ERROR] Erro no ConversationController::index: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 14:01:26] [ERROR] Stack trace: #0 C:\laragon\www\chat\app\Helpers\Database.php(62): PDO->prepare('SELECT c.*, \r\n ...')
#1 C:\laragon\www\chat\app\Helpers\Database.php(82): App\Helpers\Database::query('SELECT c.*, \r\n ...', Array)
#2 C:\laragon\www\chat\app\Models\Conversation.php(219): App\Helpers\Database::fetchAll('SELECT c.*, \r\n ...', Array)
#3 C:\laragon\www\chat\app\Services\ConversationService.php(165): App\Models\Conversation::getAll(Array)
#4 C:\laragon\www\chat\app\Controllers\ConversationController.php(66): App\Services\ConversationService::list(Array, 1)
#5 [internal function]: App\Controllers\ConversationController->index()
#6 C:\laragon\www\chat\app\Helpers\Router.php(209): call_user_func_array(Array, Array)
#7 C:\laragon\www\chat\app\Helpers\Router.php(133): App\Helpers\Router::callController(Array, Array)
#8 C:\laragon\www\chat\public\index.php(32): App\Helpers\Router::dispatch()
#9 {main}
[2025-12-05 14:02:26] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:02:26] [DEBUG] GET params | Context: {"search":"sa"}
[2025-12-05 14:02:26] [ERROR] Erro em Conversation::getAll: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 14:02:26] [ERROR] SQL: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as last_message,
                       (SELECT created_at FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as last_message_at,
                       GROUP_CONCAT(DISTINCT CONCAT(t.id, ':', t.name, ':', COALESCE(t.color, '#009ef7')) SEPARATOR '|||') as tags_data,
                       COALESCE(c.pinned, 0) as pinned,
                       c.pinned_at
                FROM conversations c
                LEFT JOIN contacts ct ON c.contact_id = ct.id
                LEFT JOIN users u ON c.agent_id = u.id
                LEFT JOIN conversation_tags ctt ON c.id = ctt.conversation_id
                LEFT JOIN tags t ON ctt.tag_id = t.id
                WHERE 1=1 AND (
                ct.name LIKE ? OR 
                ct.phone LIKE ? OR 
                ct.email LIKE ? OR 
                c.subject LIKE ? OR
                EXISTS (
                    SELECT 1 FROM messages m 
                    WHERE m.conversation_id = c.id 
                    AND m.content LIKE ?
                )
            ) GROUP BY c.id ORDER BY c.pinned DESC, c.pinned_at DESC, c.updated_at DESC LIMIT 50 OFFSET 0
[2025-12-05 14:02:26] [ERROR] Params | Context: ["%sa%","%sa%","%sa%","%sa%","%sa%"]
[2025-12-05 14:02:26] [ERROR] Filtros | Context: {"search":"sa","limit":50,"offset":0}
[2025-12-05 14:02:26] [ERROR] Erro em ConversationService::list: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 14:02:26] [ERROR] Filtros | Context: {"search":"sa","limit":50,"offset":0}
[2025-12-05 14:02:26] [ERROR] Stack trace: #0 C:\laragon\www\chat\app\Helpers\Database.php(62): PDO->prepare('SELECT c.*, \r\n ...')
#1 C:\laragon\www\chat\app\Helpers\Database.php(82): App\Helpers\Database::query('SELECT c.*, \r\n ...', Array)
#2 C:\laragon\www\chat\app\Models\Conversation.php(219): App\Helpers\Database::fetchAll('SELECT c.*, \r\n ...', Array)
#3 C:\laragon\www\chat\app\Services\ConversationService.php(165): App\Models\Conversation::getAll(Array)
#4 C:\laragon\www\chat\app\Controllers\ConversationController.php(66): App\Services\ConversationService::list(Array, 1)
#5 [internal function]: App\Controllers\ConversationController->index()
#6 C:\laragon\www\chat\app\Helpers\Router.php(209): call_user_func_array(Array, Array)
#7 C:\laragon\www\chat\app\Helpers\Router.php(133): App\Helpers\Router::callController(Array, Array)
#8 C:\laragon\www\chat\public\index.php(32): App\Helpers\Router::dispatch()
#9 {main}
[2025-12-05 14:02:26] [ERROR] Erro no ConversationController::index: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 14:02:26] [ERROR] Stack trace: #0 C:\laragon\www\chat\app\Helpers\Database.php(62): PDO->prepare('SELECT c.*, \r\n ...')
#1 C:\laragon\www\chat\app\Helpers\Database.php(82): App\Helpers\Database::query('SELECT c.*, \r\n ...', Array)
#2 C:\laragon\www\chat\app\Models\Conversation.php(219): App\Helpers\Database::fetchAll('SELECT c.*, \r\n ...', Array)
#3 C:\laragon\www\chat\app\Services\ConversationService.php(165): App\Models\Conversation::getAll(Array)
#4 C:\laragon\www\chat\app\Controllers\ConversationController.php(66): App\Services\ConversationService::list(Array, 1)
#5 [internal function]: App\Controllers\ConversationController->index()
#6 C:\laragon\www\chat\app\Helpers\Router.php(209): call_user_func_array(Array, Array)
#7 C:\laragon\www\chat\app\Helpers\Router.php(133): App\Helpers\Router::callController(Array, Array)
#8 C:\laragon\www\chat\public\index.php(32): App\Helpers\Router::dispatch()
#9 {main}
[2025-12-05 14:03:26] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:03:26] [DEBUG] GET params | Context: {"search":"sa"}
[2025-12-05 14:03:26] [ERROR] Erro em Conversation::getAll: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 14:03:26] [ERROR] SQL: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as last_message,
                       (SELECT created_at FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as last_message_at,
                       GROUP_CONCAT(DISTINCT CONCAT(t.id, ':', t.name, ':', COALESCE(t.color, '#009ef7')) SEPARATOR '|||') as tags_data,
                       COALESCE(c.pinned, 0) as pinned,
                       c.pinned_at
                FROM conversations c
                LEFT JOIN contacts ct ON c.contact_id = ct.id
                LEFT JOIN users u ON c.agent_id = u.id
                LEFT JOIN conversation_tags ctt ON c.id = ctt.conversation_id
                LEFT JOIN tags t ON ctt.tag_id = t.id
                WHERE 1=1 AND (
                ct.name LIKE ? OR 
                ct.phone LIKE ? OR 
                ct.email LIKE ? OR 
                c.subject LIKE ? OR
                EXISTS (
                    SELECT 1 FROM messages m 
                    WHERE m.conversation_id = c.id 
                    AND m.content LIKE ?
                )
            ) GROUP BY c.id ORDER BY c.pinned DESC, c.pinned_at DESC, c.updated_at DESC LIMIT 50 OFFSET 0
[2025-12-05 14:03:26] [ERROR] Params | Context: ["%sa%","%sa%","%sa%","%sa%","%sa%"]
[2025-12-05 14:03:26] [ERROR] Filtros | Context: {"search":"sa","limit":50,"offset":0}
[2025-12-05 14:03:26] [ERROR] Erro em ConversationService::list: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 14:03:26] [ERROR] Filtros | Context: {"search":"sa","limit":50,"offset":0}
[2025-12-05 14:03:26] [ERROR] Stack trace: #0 C:\laragon\www\chat\app\Helpers\Database.php(62): PDO->prepare('SELECT c.*, \r\n ...')
#1 C:\laragon\www\chat\app\Helpers\Database.php(82): App\Helpers\Database::query('SELECT c.*, \r\n ...', Array)
#2 C:\laragon\www\chat\app\Models\Conversation.php(219): App\Helpers\Database::fetchAll('SELECT c.*, \r\n ...', Array)
#3 C:\laragon\www\chat\app\Services\ConversationService.php(165): App\Models\Conversation::getAll(Array)
#4 C:\laragon\www\chat\app\Controllers\ConversationController.php(66): App\Services\ConversationService::list(Array, 1)
#5 [internal function]: App\Controllers\ConversationController->index()
#6 C:\laragon\www\chat\app\Helpers\Router.php(209): call_user_func_array(Array, Array)
#7 C:\laragon\www\chat\app\Helpers\Router.php(133): App\Helpers\Router::callController(Array, Array)
#8 C:\laragon\www\chat\public\index.php(32): App\Helpers\Router::dispatch()
#9 {main}
[2025-12-05 14:03:26] [ERROR] Erro no ConversationController::index: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 14:03:26] [ERROR] Stack trace: #0 C:\laragon\www\chat\app\Helpers\Database.php(62): PDO->prepare('SELECT c.*, \r\n ...')
#1 C:\laragon\www\chat\app\Helpers\Database.php(82): App\Helpers\Database::query('SELECT c.*, \r\n ...', Array)
#2 C:\laragon\www\chat\app\Models\Conversation.php(219): App\Helpers\Database::fetchAll('SELECT c.*, \r\n ...', Array)
#3 C:\laragon\www\chat\app\Services\ConversationService.php(165): App\Models\Conversation::getAll(Array)
#4 C:\laragon\www\chat\app\Controllers\ConversationController.php(66): App\Services\ConversationService::list(Array, 1)
#5 [internal function]: App\Controllers\ConversationController->index()
#6 C:\laragon\www\chat\app\Helpers\Router.php(209): call_user_func_array(Array, Array)
#7 C:\laragon\www\chat\app\Helpers\Router.php(133): App\Helpers\Router::callController(Array, Array)
#8 C:\laragon\www\chat\public\index.php(32): App\Helpers\Router::dispatch()
#9 {main}
[2025-12-05 14:04:26] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:04:26] [DEBUG] GET params | Context: {"search":"sa"}
[2025-12-05 14:04:26] [ERROR] Erro em Conversation::getAll: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 14:04:26] [ERROR] SQL: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as last_message,
                       (SELECT created_at FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as last_message_at,
                       GROUP_CONCAT(DISTINCT CONCAT(t.id, ':', t.name, ':', COALESCE(t.color, '#009ef7')) SEPARATOR '|||') as tags_data,
                       COALESCE(c.pinned, 0) as pinned,
                       c.pinned_at
                FROM conversations c
                LEFT JOIN contacts ct ON c.contact_id = ct.id
                LEFT JOIN users u ON c.agent_id = u.id
                LEFT JOIN conversation_tags ctt ON c.id = ctt.conversation_id
                LEFT JOIN tags t ON ctt.tag_id = t.id
                WHERE 1=1 AND (
                ct.name LIKE ? OR 
                ct.phone LIKE ? OR 
                ct.email LIKE ? OR 
                c.subject LIKE ? OR
                EXISTS (
                    SELECT 1 FROM messages m 
                    WHERE m.conversation_id = c.id 
                    AND m.content LIKE ?
                )
            ) GROUP BY c.id ORDER BY c.pinned DESC, c.pinned_at DESC, c.updated_at DESC LIMIT 50 OFFSET 0
[2025-12-05 14:04:26] [ERROR] Params | Context: ["%sa%","%sa%","%sa%","%sa%","%sa%"]
[2025-12-05 14:04:26] [ERROR] Filtros | Context: {"search":"sa","limit":50,"offset":0}
[2025-12-05 14:04:26] [ERROR] Erro em ConversationService::list: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 14:04:26] [ERROR] Filtros | Context: {"search":"sa","limit":50,"offset":0}
[2025-12-05 14:04:26] [ERROR] Stack trace: #0 C:\laragon\www\chat\app\Helpers\Database.php(62): PDO->prepare('SELECT c.*, \r\n ...')
#1 C:\laragon\www\chat\app\Helpers\Database.php(82): App\Helpers\Database::query('SELECT c.*, \r\n ...', Array)
#2 C:\laragon\www\chat\app\Models\Conversation.php(219): App\Helpers\Database::fetchAll('SELECT c.*, \r\n ...', Array)
#3 C:\laragon\www\chat\app\Services\ConversationService.php(165): App\Models\Conversation::getAll(Array)
#4 C:\laragon\www\chat\app\Controllers\ConversationController.php(66): App\Services\ConversationService::list(Array, 1)
#5 [internal function]: App\Controllers\ConversationController->index()
#6 C:\laragon\www\chat\app\Helpers\Router.php(209): call_user_func_array(Array, Array)
#7 C:\laragon\www\chat\app\Helpers\Router.php(133): App\Helpers\Router::callController(Array, Array)
#8 C:\laragon\www\chat\public\index.php(32): App\Helpers\Router::dispatch()
#9 {main}
[2025-12-05 14:04:26] [ERROR] Erro no ConversationController::index: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 14:04:26] [ERROR] Stack trace: #0 C:\laragon\www\chat\app\Helpers\Database.php(62): PDO->prepare('SELECT c.*, \r\n ...')
#1 C:\laragon\www\chat\app\Helpers\Database.php(82): App\Helpers\Database::query('SELECT c.*, \r\n ...', Array)
#2 C:\laragon\www\chat\app\Models\Conversation.php(219): App\Helpers\Database::fetchAll('SELECT c.*, \r\n ...', Array)
#3 C:\laragon\www\chat\app\Services\ConversationService.php(165): App\Models\Conversation::getAll(Array)
#4 C:\laragon\www\chat\app\Controllers\ConversationController.php(66): App\Services\ConversationService::list(Array, 1)
#5 [internal function]: App\Controllers\ConversationController->index()
#6 C:\laragon\www\chat\app\Helpers\Router.php(209): call_user_func_array(Array, Array)
#7 C:\laragon\www\chat\app\Helpers\Router.php(133): App\Helpers\Router::callController(Array, Array)
#8 C:\laragon\www\chat\public\index.php(32): App\Helpers\Router::dispatch()
#9 {main}
[2025-12-05 14:05:26] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:05:26] [DEBUG] GET params | Context: {"search":"sa"}
[2025-12-05 14:05:26] [ERROR] Erro em Conversation::getAll: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 14:05:26] [ERROR] SQL: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as last_message,
                       (SELECT created_at FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as last_message_at,
                       GROUP_CONCAT(DISTINCT CONCAT(t.id, ':', t.name, ':', COALESCE(t.color, '#009ef7')) SEPARATOR '|||') as tags_data,
                       COALESCE(c.pinned, 0) as pinned,
                       c.pinned_at
                FROM conversations c
                LEFT JOIN contacts ct ON c.contact_id = ct.id
                LEFT JOIN users u ON c.agent_id = u.id
                LEFT JOIN conversation_tags ctt ON c.id = ctt.conversation_id
                LEFT JOIN tags t ON ctt.tag_id = t.id
                WHERE 1=1 AND (
                ct.name LIKE ? OR 
                ct.phone LIKE ? OR 
                ct.email LIKE ? OR 
                c.subject LIKE ? OR
                EXISTS (
                    SELECT 1 FROM messages m 
                    WHERE m.conversation_id = c.id 
                    AND m.content LIKE ?
                )
            ) GROUP BY c.id ORDER BY c.pinned DESC, c.pinned_at DESC, c.updated_at DESC LIMIT 50 OFFSET 0
[2025-12-05 14:05:26] [ERROR] Params | Context: ["%sa%","%sa%","%sa%","%sa%","%sa%"]
[2025-12-05 14:05:26] [ERROR] Filtros | Context: {"search":"sa","limit":50,"offset":0}
[2025-12-05 14:05:26] [ERROR] Erro em ConversationService::list: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 14:05:26] [ERROR] Filtros | Context: {"search":"sa","limit":50,"offset":0}
[2025-12-05 14:05:26] [ERROR] Stack trace: #0 C:\laragon\www\chat\app\Helpers\Database.php(62): PDO->prepare('SELECT c.*, \r\n ...')
#1 C:\laragon\www\chat\app\Helpers\Database.php(82): App\Helpers\Database::query('SELECT c.*, \r\n ...', Array)
#2 C:\laragon\www\chat\app\Models\Conversation.php(219): App\Helpers\Database::fetchAll('SELECT c.*, \r\n ...', Array)
#3 C:\laragon\www\chat\app\Services\ConversationService.php(165): App\Models\Conversation::getAll(Array)
#4 C:\laragon\www\chat\app\Controllers\ConversationController.php(66): App\Services\ConversationService::list(Array, 1)
#5 [internal function]: App\Controllers\ConversationController->index()
#6 C:\laragon\www\chat\app\Helpers\Router.php(209): call_user_func_array(Array, Array)
#7 C:\laragon\www\chat\app\Helpers\Router.php(133): App\Helpers\Router::callController(Array, Array)
#8 C:\laragon\www\chat\public\index.php(32): App\Helpers\Router::dispatch()
#9 {main}
[2025-12-05 14:05:26] [ERROR] Erro no ConversationController::index: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 14:05:26] [ERROR] Stack trace: #0 C:\laragon\www\chat\app\Helpers\Database.php(62): PDO->prepare('SELECT c.*, \r\n ...')
#1 C:\laragon\www\chat\app\Helpers\Database.php(82): App\Helpers\Database::query('SELECT c.*, \r\n ...', Array)
#2 C:\laragon\www\chat\app\Models\Conversation.php(219): App\Helpers\Database::fetchAll('SELECT c.*, \r\n ...', Array)
#3 C:\laragon\www\chat\app\Services\ConversationService.php(165): App\Models\Conversation::getAll(Array)
#4 C:\laragon\www\chat\app\Controllers\ConversationController.php(66): App\Services\ConversationService::list(Array, 1)
#5 [internal function]: App\Controllers\ConversationController->index()
#6 C:\laragon\www\chat\app\Helpers\Router.php(209): call_user_func_array(Array, Array)
#7 C:\laragon\www\chat\app\Helpers\Router.php(133): App\Helpers\Router::callController(Array, Array)
#8 C:\laragon\www\chat\public\index.php(32): App\Helpers\Router::dispatch()
#9 {main}
[2025-12-05 14:06:24] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:06:24] [DEBUG] GET params | Context: {"search":"sa"}
[2025-12-05 14:06:24] [ERROR] Erro em Conversation::getAll: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 14:06:24] [ERROR] SQL: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as last_message,
                       (SELECT created_at FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as last_message_at,
                       GROUP_CONCAT(DISTINCT CONCAT(t.id, ':', t.name, ':', COALESCE(t.color, '#009ef7')) SEPARATOR '|||') as tags_data,
                       COALESCE(c.pinned, 0) as pinned,
                       c.pinned_at
                FROM conversations c
                LEFT JOIN contacts ct ON c.contact_id = ct.id
                LEFT JOIN users u ON c.agent_id = u.id
                LEFT JOIN conversation_tags ctt ON c.id = ctt.conversation_id
                LEFT JOIN tags t ON ctt.tag_id = t.id
                WHERE 1=1 AND (
                ct.name LIKE ? OR 
                ct.phone LIKE ? OR 
                ct.email LIKE ? OR 
                c.subject LIKE ? OR
                EXISTS (
                    SELECT 1 FROM messages m 
                    WHERE m.conversation_id = c.id 
                    AND m.content LIKE ?
                )
            ) GROUP BY c.id ORDER BY c.pinned DESC, c.pinned_at DESC, c.updated_at DESC LIMIT 50 OFFSET 0
[2025-12-05 14:06:24] [ERROR] Params | Context: ["%sa%","%sa%","%sa%","%sa%","%sa%"]
[2025-12-05 14:06:24] [ERROR] Filtros | Context: {"search":"sa","limit":50,"offset":0}
[2025-12-05 14:06:24] [ERROR] Erro em ConversationService::list: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 14:06:24] [ERROR] Filtros | Context: {"search":"sa","limit":50,"offset":0}
[2025-12-05 14:06:24] [ERROR] Stack trace: #0 C:\laragon\www\chat\app\Helpers\Database.php(62): PDO->prepare('SELECT c.*, \r\n ...')
#1 C:\laragon\www\chat\app\Helpers\Database.php(82): App\Helpers\Database::query('SELECT c.*, \r\n ...', Array)
#2 C:\laragon\www\chat\app\Models\Conversation.php(219): App\Helpers\Database::fetchAll('SELECT c.*, \r\n ...', Array)
#3 C:\laragon\www\chat\app\Services\ConversationService.php(165): App\Models\Conversation::getAll(Array)
#4 C:\laragon\www\chat\app\Controllers\ConversationController.php(66): App\Services\ConversationService::list(Array, 1)
#5 [internal function]: App\Controllers\ConversationController->index()
#6 C:\laragon\www\chat\app\Helpers\Router.php(209): call_user_func_array(Array, Array)
#7 C:\laragon\www\chat\app\Helpers\Router.php(133): App\Helpers\Router::callController(Array, Array)
#8 C:\laragon\www\chat\public\index.php(32): App\Helpers\Router::dispatch()
#9 {main}
[2025-12-05 14:06:24] [ERROR] Erro no ConversationController::index: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 14:06:24] [ERROR] Stack trace: #0 C:\laragon\www\chat\app\Helpers\Database.php(62): PDO->prepare('SELECT c.*, \r\n ...')
#1 C:\laragon\www\chat\app\Helpers\Database.php(82): App\Helpers\Database::query('SELECT c.*, \r\n ...', Array)
#2 C:\laragon\www\chat\app\Models\Conversation.php(219): App\Helpers\Database::fetchAll('SELECT c.*, \r\n ...', Array)
#3 C:\laragon\www\chat\app\Services\ConversationService.php(165): App\Models\Conversation::getAll(Array)
#4 C:\laragon\www\chat\app\Controllers\ConversationController.php(66): App\Services\ConversationService::list(Array, 1)
#5 [internal function]: App\Controllers\ConversationController->index()
#6 C:\laragon\www\chat\app\Helpers\Router.php(209): call_user_func_array(Array, Array)
#7 C:\laragon\www\chat\app\Helpers\Router.php(133): App\Helpers\Router::callController(Array, Array)
#8 C:\laragon\www\chat\public\index.php(32): App\Helpers\Router::dispatch()
#9 {main}
[2025-12-05 14:06:28] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:06:28] [DEBUG] GET params | Context: {"search":"sa"}
[2025-12-05 14:06:28] [ERROR] Erro em Conversation::getAll: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 14:06:28] [ERROR] SQL: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as last_message,
                       (SELECT created_at FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as last_message_at,
                       GROUP_CONCAT(DISTINCT CONCAT(t.id, ':', t.name, ':', COALESCE(t.color, '#009ef7')) SEPARATOR '|||') as tags_data,
                       COALESCE(c.pinned, 0) as pinned,
                       c.pinned_at
                FROM conversations c
                LEFT JOIN contacts ct ON c.contact_id = ct.id
                LEFT JOIN users u ON c.agent_id = u.id
                LEFT JOIN conversation_tags ctt ON c.id = ctt.conversation_id
                LEFT JOIN tags t ON ctt.tag_id = t.id
                WHERE 1=1 AND (
                ct.name LIKE ? OR 
                ct.phone LIKE ? OR 
                ct.email LIKE ? OR 
                c.subject LIKE ? OR
                EXISTS (
                    SELECT 1 FROM messages m 
                    WHERE m.conversation_id = c.id 
                    AND m.content LIKE ?
                )
            ) GROUP BY c.id ORDER BY c.pinned DESC, c.pinned_at DESC, c.updated_at DESC LIMIT 50 OFFSET 0
[2025-12-05 14:06:28] [ERROR] Params | Context: ["%sa%","%sa%","%sa%","%sa%","%sa%"]
[2025-12-05 14:06:28] [ERROR] Filtros | Context: {"search":"sa","limit":50,"offset":0}
[2025-12-05 14:06:28] [ERROR] Erro em ConversationService::list: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 14:06:28] [ERROR] Filtros | Context: {"search":"sa","limit":50,"offset":0}
[2025-12-05 14:06:28] [ERROR] Stack trace: #0 C:\laragon\www\chat\app\Helpers\Database.php(62): PDO->prepare('SELECT c.*, \r\n ...')
#1 C:\laragon\www\chat\app\Helpers\Database.php(82): App\Helpers\Database::query('SELECT c.*, \r\n ...', Array)
#2 C:\laragon\www\chat\app\Models\Conversation.php(219): App\Helpers\Database::fetchAll('SELECT c.*, \r\n ...', Array)
#3 C:\laragon\www\chat\app\Services\ConversationService.php(165): App\Models\Conversation::getAll(Array)
#4 C:\laragon\www\chat\app\Controllers\ConversationController.php(66): App\Services\ConversationService::list(Array, 1)
#5 [internal function]: App\Controllers\ConversationController->index()
#6 C:\laragon\www\chat\app\Helpers\Router.php(209): call_user_func_array(Array, Array)
#7 C:\laragon\www\chat\app\Helpers\Router.php(133): App\Helpers\Router::callController(Array, Array)
#8 C:\laragon\www\chat\public\index.php(32): App\Helpers\Router::dispatch()
#9 {main}
[2025-12-05 14:06:28] [ERROR] Erro no ConversationController::index: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 14:06:28] [ERROR] Stack trace: #0 C:\laragon\www\chat\app\Helpers\Database.php(62): PDO->prepare('SELECT c.*, \r\n ...')
#1 C:\laragon\www\chat\app\Helpers\Database.php(82): App\Helpers\Database::query('SELECT c.*, \r\n ...', Array)
#2 C:\laragon\www\chat\app\Models\Conversation.php(219): App\Helpers\Database::fetchAll('SELECT c.*, \r\n ...', Array)
#3 C:\laragon\www\chat\app\Services\ConversationService.php(165): App\Models\Conversation::getAll(Array)
#4 C:\laragon\www\chat\app\Controllers\ConversationController.php(66): App\Services\ConversationService::list(Array, 1)
#5 [internal function]: App\Controllers\ConversationController->index()
#6 C:\laragon\www\chat\app\Helpers\Router.php(209): call_user_func_array(Array, Array)
#7 C:\laragon\www\chat\app\Helpers\Router.php(133): App\Helpers\Router::callController(Array, Array)
#8 C:\laragon\www\chat\public\index.php(32): App\Helpers\Router::dispatch()
#9 {main}
[2025-12-05 14:06:30] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:06:30] [DEBUG] GET params | Context: {"search":"sa","id":"1"}
[2025-12-05 14:06:30] [ERROR] Erro em Conversation::getAll: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 14:06:30] [ERROR] SQL: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as last_message,
                       (SELECT created_at FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as last_message_at,
                       GROUP_CONCAT(DISTINCT CONCAT(t.id, ':', t.name, ':', COALESCE(t.color, '#009ef7')) SEPARATOR '|||') as tags_data,
                       COALESCE(c.pinned, 0) as pinned,
                       c.pinned_at
                FROM conversations c
                LEFT JOIN contacts ct ON c.contact_id = ct.id
                LEFT JOIN users u ON c.agent_id = u.id
                LEFT JOIN conversation_tags ctt ON c.id = ctt.conversation_id
                LEFT JOIN tags t ON ctt.tag_id = t.id
                WHERE 1=1 AND (
                ct.name LIKE ? OR 
                ct.phone LIKE ? OR 
                ct.email LIKE ? OR 
                c.subject LIKE ? OR
                EXISTS (
                    SELECT 1 FROM messages m 
                    WHERE m.conversation_id = c.id 
                    AND m.content LIKE ?
                )
            ) GROUP BY c.id ORDER BY c.pinned DESC, c.pinned_at DESC, c.updated_at DESC LIMIT 50 OFFSET 0
[2025-12-05 14:06:30] [ERROR] Params | Context: ["%sa%","%sa%","%sa%","%sa%","%sa%"]
[2025-12-05 14:06:30] [ERROR] Filtros | Context: {"search":"sa","limit":50,"offset":0}
[2025-12-05 14:06:30] [ERROR] Erro em ConversationService::list: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 14:06:30] [ERROR] Filtros | Context: {"search":"sa","limit":50,"offset":0}
[2025-12-05 14:06:30] [ERROR] Stack trace: #0 C:\laragon\www\chat\app\Helpers\Database.php(62): PDO->prepare('SELECT c.*, \r\n ...')
#1 C:\laragon\www\chat\app\Helpers\Database.php(82): App\Helpers\Database::query('SELECT c.*, \r\n ...', Array)
#2 C:\laragon\www\chat\app\Models\Conversation.php(219): App\Helpers\Database::fetchAll('SELECT c.*, \r\n ...', Array)
#3 C:\laragon\www\chat\app\Services\ConversationService.php(165): App\Models\Conversation::getAll(Array)
#4 C:\laragon\www\chat\app\Controllers\ConversationController.php(66): App\Services\ConversationService::list(Array, 1)
#5 [internal function]: App\Controllers\ConversationController->index()
#6 C:\laragon\www\chat\app\Helpers\Router.php(209): call_user_func_array(Array, Array)
#7 C:\laragon\www\chat\app\Helpers\Router.php(133): App\Helpers\Router::callController(Array, Array)
#8 C:\laragon\www\chat\public\index.php(32): App\Helpers\Router::dispatch()
#9 {main}
[2025-12-05 14:06:30] [ERROR] Erro no ConversationController::index: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 14:06:30] [ERROR] Stack trace: #0 C:\laragon\www\chat\app\Helpers\Database.php(62): PDO->prepare('SELECT c.*, \r\n ...')
#1 C:\laragon\www\chat\app\Helpers\Database.php(82): App\Helpers\Database::query('SELECT c.*, \r\n ...', Array)
#2 C:\laragon\www\chat\app\Models\Conversation.php(219): App\Helpers\Database::fetchAll('SELECT c.*, \r\n ...', Array)
#3 C:\laragon\www\chat\app\Services\ConversationService.php(165): App\Models\Conversation::getAll(Array)
#4 C:\laragon\www\chat\app\Controllers\ConversationController.php(66): App\Services\ConversationService::list(Array, 1)
#5 [internal function]: App\Controllers\ConversationController->index()
#6 C:\laragon\www\chat\app\Helpers\Router.php(209): call_user_func_array(Array, Array)
#7 C:\laragon\www\chat\app\Helpers\Router.php(133): App\Helpers\Router::callController(Array, Array)
#8 C:\laragon\www\chat\public\index.php(32): App\Helpers\Router::dispatch()
#9 {main}
[2025-12-05 14:06:37] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:06:37] [DEBUG] GET params | Context: {"search":"sa","id":"1"}
[2025-12-05 14:06:37] [ERROR] Erro em Conversation::getAll: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 14:06:37] [ERROR] SQL: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as last_message,
                       (SELECT created_at FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as last_message_at,
                       GROUP_CONCAT(DISTINCT CONCAT(t.id, ':', t.name, ':', COALESCE(t.color, '#009ef7')) SEPARATOR '|||') as tags_data,
                       COALESCE(c.pinned, 0) as pinned,
                       c.pinned_at
                FROM conversations c
                LEFT JOIN contacts ct ON c.contact_id = ct.id
                LEFT JOIN users u ON c.agent_id = u.id
                LEFT JOIN conversation_tags ctt ON c.id = ctt.conversation_id
                LEFT JOIN tags t ON ctt.tag_id = t.id
                WHERE 1=1 AND (
                ct.name LIKE ? OR 
                ct.phone LIKE ? OR 
                ct.email LIKE ? OR 
                c.subject LIKE ? OR
                EXISTS (
                    SELECT 1 FROM messages m 
                    WHERE m.conversation_id = c.id 
                    AND m.content LIKE ?
                )
            ) GROUP BY c.id ORDER BY c.pinned DESC, c.pinned_at DESC, c.updated_at DESC LIMIT 50 OFFSET 0
[2025-12-05 14:06:37] [ERROR] Params | Context: ["%sa%","%sa%","%sa%","%sa%","%sa%"]
[2025-12-05 14:06:37] [ERROR] Filtros | Context: {"search":"sa","limit":50,"offset":0}
[2025-12-05 14:06:37] [ERROR] Erro em ConversationService::list: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 14:06:37] [ERROR] Filtros | Context: {"search":"sa","limit":50,"offset":0}
[2025-12-05 14:06:37] [ERROR] Stack trace: #0 C:\laragon\www\chat\app\Helpers\Database.php(62): PDO->prepare('SELECT c.*, \r\n ...')
#1 C:\laragon\www\chat\app\Helpers\Database.php(82): App\Helpers\Database::query('SELECT c.*, \r\n ...', Array)
#2 C:\laragon\www\chat\app\Models\Conversation.php(219): App\Helpers\Database::fetchAll('SELECT c.*, \r\n ...', Array)
#3 C:\laragon\www\chat\app\Services\ConversationService.php(165): App\Models\Conversation::getAll(Array)
#4 C:\laragon\www\chat\app\Controllers\ConversationController.php(66): App\Services\ConversationService::list(Array, 1)
#5 [internal function]: App\Controllers\ConversationController->index()
#6 C:\laragon\www\chat\app\Helpers\Router.php(209): call_user_func_array(Array, Array)
#7 C:\laragon\www\chat\app\Helpers\Router.php(133): App\Helpers\Router::callController(Array, Array)
#8 C:\laragon\www\chat\public\index.php(32): App\Helpers\Router::dispatch()
#9 {main}
[2025-12-05 14:06:37] [ERROR] Erro no ConversationController::index: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 14:06:37] [ERROR] Stack trace: #0 C:\laragon\www\chat\app\Helpers\Database.php(62): PDO->prepare('SELECT c.*, \r\n ...')
#1 C:\laragon\www\chat\app\Helpers\Database.php(82): App\Helpers\Database::query('SELECT c.*, \r\n ...', Array)
#2 C:\laragon\www\chat\app\Models\Conversation.php(219): App\Helpers\Database::fetchAll('SELECT c.*, \r\n ...', Array)
#3 C:\laragon\www\chat\app\Services\ConversationService.php(165): App\Models\Conversation::getAll(Array)
#4 C:\laragon\www\chat\app\Controllers\ConversationController.php(66): App\Services\ConversationService::list(Array, 1)
#5 [internal function]: App\Controllers\ConversationController->index()
#6 C:\laragon\www\chat\app\Helpers\Router.php(209): call_user_func_array(Array, Array)
#7 C:\laragon\www\chat\app\Helpers\Router.php(133): App\Helpers\Router::callController(Array, Array)
#8 C:\laragon\www\chat\public\index.php(32): App\Helpers\Router::dispatch()
#9 {main}
[2025-12-05 14:06:40] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:06:40] [DEBUG] GET params
[2025-12-05 14:06:42] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:06:42] [DEBUG] GET params | Context: {"id":"1"}
[2025-12-05 14:06:44] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:06:44] [DEBUG] GET params | Context: {"search":"t"}
[2025-12-05 14:06:44] [ERROR] Erro em Conversation::getAll: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 14:06:44] [ERROR] SQL: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as last_message,
                       (SELECT created_at FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as last_message_at,
                       GROUP_CONCAT(DISTINCT CONCAT(t.id, ':', t.name, ':', COALESCE(t.color, '#009ef7')) SEPARATOR '|||') as tags_data,
                       COALESCE(c.pinned, 0) as pinned,
                       c.pinned_at
                FROM conversations c
                LEFT JOIN contacts ct ON c.contact_id = ct.id
                LEFT JOIN users u ON c.agent_id = u.id
                LEFT JOIN conversation_tags ctt ON c.id = ctt.conversation_id
                LEFT JOIN tags t ON ctt.tag_id = t.id
                WHERE 1=1 AND (
                ct.name LIKE ? OR 
                ct.phone LIKE ? OR 
                ct.email LIKE ? OR 
                c.subject LIKE ? OR
                EXISTS (
                    SELECT 1 FROM messages m 
                    WHERE m.conversation_id = c.id 
                    AND m.content LIKE ?
                )
            ) GROUP BY c.id ORDER BY c.pinned DESC, c.pinned_at DESC, c.updated_at DESC LIMIT 50 OFFSET 0
[2025-12-05 14:06:44] [ERROR] Params | Context: ["%t%","%t%","%t%","%t%","%t%"]
[2025-12-05 14:06:44] [ERROR] Filtros | Context: {"search":"t","limit":50,"offset":0}
[2025-12-05 14:06:44] [ERROR] Erro em ConversationService::list: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 14:06:44] [ERROR] Filtros | Context: {"search":"t","limit":50,"offset":0}
[2025-12-05 14:06:44] [ERROR] Stack trace: #0 C:\laragon\www\chat\app\Helpers\Database.php(62): PDO->prepare('SELECT c.*, \r\n ...')
#1 C:\laragon\www\chat\app\Helpers\Database.php(82): App\Helpers\Database::query('SELECT c.*, \r\n ...', Array)
#2 C:\laragon\www\chat\app\Models\Conversation.php(219): App\Helpers\Database::fetchAll('SELECT c.*, \r\n ...', Array)
#3 C:\laragon\www\chat\app\Services\ConversationService.php(165): App\Models\Conversation::getAll(Array)
#4 C:\laragon\www\chat\app\Controllers\ConversationController.php(66): App\Services\ConversationService::list(Array, 1)
#5 [internal function]: App\Controllers\ConversationController->index()
#6 C:\laragon\www\chat\app\Helpers\Router.php(209): call_user_func_array(Array, Array)
#7 C:\laragon\www\chat\app\Helpers\Router.php(133): App\Helpers\Router::callController(Array, Array)
#8 C:\laragon\www\chat\public\index.php(32): App\Helpers\Router::dispatch()
#9 {main}
[2025-12-05 14:06:44] [ERROR] Erro no ConversationController::index: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 14:06:44] [ERROR] Stack trace: #0 C:\laragon\www\chat\app\Helpers\Database.php(62): PDO->prepare('SELECT c.*, \r\n ...')
#1 C:\laragon\www\chat\app\Helpers\Database.php(82): App\Helpers\Database::query('SELECT c.*, \r\n ...', Array)
#2 C:\laragon\www\chat\app\Models\Conversation.php(219): App\Helpers\Database::fetchAll('SELECT c.*, \r\n ...', Array)
#3 C:\laragon\www\chat\app\Services\ConversationService.php(165): App\Models\Conversation::getAll(Array)
#4 C:\laragon\www\chat\app\Controllers\ConversationController.php(66): App\Services\ConversationService::list(Array, 1)
#5 [internal function]: App\Controllers\ConversationController->index()
#6 C:\laragon\www\chat\app\Helpers\Router.php(209): call_user_func_array(Array, Array)
#7 C:\laragon\www\chat\app\Helpers\Router.php(133): App\Helpers\Router::callController(Array, Array)
#8 C:\laragon\www\chat\public\index.php(32): App\Helpers\Router::dispatch()
#9 {main}
[2025-12-05 14:06:52] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:06:52] [DEBUG] GET params | Context: {"search":"t"}
[2025-12-05 14:06:52] [ERROR] Erro em Conversation::getAll: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 14:06:52] [ERROR] SQL: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as last_message,
                       (SELECT created_at FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as last_message_at,
                       GROUP_CONCAT(DISTINCT CONCAT(t.id, ':', t.name, ':', COALESCE(t.color, '#009ef7')) SEPARATOR '|||') as tags_data,
                       COALESCE(c.pinned, 0) as pinned,
                       c.pinned_at
                FROM conversations c
                LEFT JOIN contacts ct ON c.contact_id = ct.id
                LEFT JOIN users u ON c.agent_id = u.id
                LEFT JOIN conversation_tags ctt ON c.id = ctt.conversation_id
                LEFT JOIN tags t ON ctt.tag_id = t.id
                WHERE 1=1 AND (
                ct.name LIKE ? OR 
                ct.phone LIKE ? OR 
                ct.email LIKE ? OR 
                c.subject LIKE ? OR
                EXISTS (
                    SELECT 1 FROM messages m 
                    WHERE m.conversation_id = c.id 
                    AND m.content LIKE ?
                )
            ) GROUP BY c.id ORDER BY c.pinned DESC, c.pinned_at DESC, c.updated_at DESC LIMIT 50 OFFSET 0
[2025-12-05 14:06:52] [ERROR] Params | Context: ["%t%","%t%","%t%","%t%","%t%"]
[2025-12-05 14:06:52] [ERROR] Filtros | Context: {"search":"t","limit":50,"offset":0}
[2025-12-05 14:06:52] [ERROR] Erro em ConversationService::list: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 14:06:52] [ERROR] Filtros | Context: {"search":"t","limit":50,"offset":0}
[2025-12-05 14:06:52] [ERROR] Stack trace: #0 C:\laragon\www\chat\app\Helpers\Database.php(62): PDO->prepare('SELECT c.*, \r\n ...')
#1 C:\laragon\www\chat\app\Helpers\Database.php(82): App\Helpers\Database::query('SELECT c.*, \r\n ...', Array)
#2 C:\laragon\www\chat\app\Models\Conversation.php(219): App\Helpers\Database::fetchAll('SELECT c.*, \r\n ...', Array)
#3 C:\laragon\www\chat\app\Services\ConversationService.php(165): App\Models\Conversation::getAll(Array)
#4 C:\laragon\www\chat\app\Controllers\ConversationController.php(66): App\Services\ConversationService::list(Array, 1)
#5 [internal function]: App\Controllers\ConversationController->index()
#6 C:\laragon\www\chat\app\Helpers\Router.php(209): call_user_func_array(Array, Array)
#7 C:\laragon\www\chat\app\Helpers\Router.php(133): App\Helpers\Router::callController(Array, Array)
#8 C:\laragon\www\chat\public\index.php(32): App\Helpers\Router::dispatch()
#9 {main}
[2025-12-05 14:06:52] [ERROR] Erro no ConversationController::index: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 14:06:52] [ERROR] Stack trace: #0 C:\laragon\www\chat\app\Helpers\Database.php(62): PDO->prepare('SELECT c.*, \r\n ...')
#1 C:\laragon\www\chat\app\Helpers\Database.php(82): App\Helpers\Database::query('SELECT c.*, \r\n ...', Array)
#2 C:\laragon\www\chat\app\Models\Conversation.php(219): App\Helpers\Database::fetchAll('SELECT c.*, \r\n ...', Array)
#3 C:\laragon\www\chat\app\Services\ConversationService.php(165): App\Models\Conversation::getAll(Array)
#4 C:\laragon\www\chat\app\Controllers\ConversationController.php(66): App\Services\ConversationService::list(Array, 1)
#5 [internal function]: App\Controllers\ConversationController->index()
#6 C:\laragon\www\chat\app\Helpers\Router.php(209): call_user_func_array(Array, Array)
#7 C:\laragon\www\chat\app\Helpers\Router.php(133): App\Helpers\Router::callController(Array, Array)
#8 C:\laragon\www\chat\public\index.php(32): App\Helpers\Router::dispatch()
#9 {main}
[2025-12-05 14:07:02] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:07:02] [DEBUG] GET params | Context: {"search":"t"}
[2025-12-05 14:07:02] [ERROR] Erro em Conversation::getAll: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 14:07:02] [ERROR] SQL: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as last_message,
                       (SELECT created_at FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as last_message_at,
                       GROUP_CONCAT(DISTINCT CONCAT(t.id, ':', t.name, ':', COALESCE(t.color, '#009ef7')) SEPARATOR '|||') as tags_data,
                       COALESCE(c.pinned, 0) as pinned,
                       c.pinned_at
                FROM conversations c
                LEFT JOIN contacts ct ON c.contact_id = ct.id
                LEFT JOIN users u ON c.agent_id = u.id
                LEFT JOIN conversation_tags ctt ON c.id = ctt.conversation_id
                LEFT JOIN tags t ON ctt.tag_id = t.id
                WHERE 1=1 AND (
                ct.name LIKE ? OR 
                ct.phone LIKE ? OR 
                ct.email LIKE ? OR 
                c.subject LIKE ? OR
                EXISTS (
                    SELECT 1 FROM messages m 
                    WHERE m.conversation_id = c.id 
                    AND m.content LIKE ?
                )
            ) GROUP BY c.id ORDER BY c.pinned DESC, c.pinned_at DESC, c.updated_at DESC LIMIT 50 OFFSET 0
[2025-12-05 14:07:02] [ERROR] Params | Context: ["%t%","%t%","%t%","%t%","%t%"]
[2025-12-05 14:07:02] [ERROR] Filtros | Context: {"search":"t","limit":50,"offset":0}
[2025-12-05 14:07:02] [ERROR] Erro em ConversationService::list: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 14:07:02] [ERROR] Filtros | Context: {"search":"t","limit":50,"offset":0}
[2025-12-05 14:07:02] [ERROR] Stack trace: #0 C:\laragon\www\chat\app\Helpers\Database.php(62): PDO->prepare('SELECT c.*, \r\n ...')
#1 C:\laragon\www\chat\app\Helpers\Database.php(82): App\Helpers\Database::query('SELECT c.*, \r\n ...', Array)
#2 C:\laragon\www\chat\app\Models\Conversation.php(219): App\Helpers\Database::fetchAll('SELECT c.*, \r\n ...', Array)
#3 C:\laragon\www\chat\app\Services\ConversationService.php(165): App\Models\Conversation::getAll(Array)
#4 C:\laragon\www\chat\app\Controllers\ConversationController.php(66): App\Services\ConversationService::list(Array, 1)
#5 [internal function]: App\Controllers\ConversationController->index()
#6 C:\laragon\www\chat\app\Helpers\Router.php(209): call_user_func_array(Array, Array)
#7 C:\laragon\www\chat\app\Helpers\Router.php(133): App\Helpers\Router::callController(Array, Array)
#8 C:\laragon\www\chat\public\index.php(32): App\Helpers\Router::dispatch()
#9 {main}
[2025-12-05 14:07:02] [ERROR] Erro no ConversationController::index: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 14:07:02] [ERROR] Stack trace: #0 C:\laragon\www\chat\app\Helpers\Database.php(62): PDO->prepare('SELECT c.*, \r\n ...')
#1 C:\laragon\www\chat\app\Helpers\Database.php(82): App\Helpers\Database::query('SELECT c.*, \r\n ...', Array)
#2 C:\laragon\www\chat\app\Models\Conversation.php(219): App\Helpers\Database::fetchAll('SELECT c.*, \r\n ...', Array)
#3 C:\laragon\www\chat\app\Services\ConversationService.php(165): App\Models\Conversation::getAll(Array)
#4 C:\laragon\www\chat\app\Controllers\ConversationController.php(66): App\Services\ConversationService::list(Array, 1)
#5 [internal function]: App\Controllers\ConversationController->index()
#6 C:\laragon\www\chat\app\Helpers\Router.php(209): call_user_func_array(Array, Array)
#7 C:\laragon\www\chat\app\Helpers\Router.php(133): App\Helpers\Router::callController(Array, Array)
#8 C:\laragon\www\chat\public\index.php(32): App\Helpers\Router::dispatch()
#9 {main}
[2025-12-05 14:07:12] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:07:12] [DEBUG] GET params | Context: {"search":"t"}
[2025-12-05 14:07:12] [ERROR] Erro em Conversation::getAll: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 14:07:12] [ERROR] SQL: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as last_message,
                       (SELECT created_at FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as last_message_at,
                       GROUP_CONCAT(DISTINCT CONCAT(t.id, ':', t.name, ':', COALESCE(t.color, '#009ef7')) SEPARATOR '|||') as tags_data,
                       COALESCE(c.pinned, 0) as pinned,
                       c.pinned_at
                FROM conversations c
                LEFT JOIN contacts ct ON c.contact_id = ct.id
                LEFT JOIN users u ON c.agent_id = u.id
                LEFT JOIN conversation_tags ctt ON c.id = ctt.conversation_id
                LEFT JOIN tags t ON ctt.tag_id = t.id
                WHERE 1=1 AND (
                ct.name LIKE ? OR 
                ct.phone LIKE ? OR 
                ct.email LIKE ? OR 
                c.subject LIKE ? OR
                EXISTS (
                    SELECT 1 FROM messages m 
                    WHERE m.conversation_id = c.id 
                    AND m.content LIKE ?
                )
            ) GROUP BY c.id ORDER BY c.pinned DESC, c.pinned_at DESC, c.updated_at DESC LIMIT 50 OFFSET 0
[2025-12-05 14:07:12] [ERROR] Params | Context: ["%t%","%t%","%t%","%t%","%t%"]
[2025-12-05 14:07:12] [ERROR] Filtros | Context: {"search":"t","limit":50,"offset":0}
[2025-12-05 14:07:12] [ERROR] Erro em ConversationService::list: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 14:07:12] [ERROR] Filtros | Context: {"search":"t","limit":50,"offset":0}
[2025-12-05 14:07:12] [ERROR] Stack trace: #0 C:\laragon\www\chat\app\Helpers\Database.php(62): PDO->prepare('SELECT c.*, \r\n ...')
#1 C:\laragon\www\chat\app\Helpers\Database.php(82): App\Helpers\Database::query('SELECT c.*, \r\n ...', Array)
#2 C:\laragon\www\chat\app\Models\Conversation.php(219): App\Helpers\Database::fetchAll('SELECT c.*, \r\n ...', Array)
#3 C:\laragon\www\chat\app\Services\ConversationService.php(165): App\Models\Conversation::getAll(Array)
#4 C:\laragon\www\chat\app\Controllers\ConversationController.php(66): App\Services\ConversationService::list(Array, 1)
#5 [internal function]: App\Controllers\ConversationController->index()
#6 C:\laragon\www\chat\app\Helpers\Router.php(209): call_user_func_array(Array, Array)
#7 C:\laragon\www\chat\app\Helpers\Router.php(133): App\Helpers\Router::callController(Array, Array)
#8 C:\laragon\www\chat\public\index.php(32): App\Helpers\Router::dispatch()
#9 {main}
[2025-12-05 14:07:12] [ERROR] Erro no ConversationController::index: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 14:07:12] [ERROR] Stack trace: #0 C:\laragon\www\chat\app\Helpers\Database.php(62): PDO->prepare('SELECT c.*, \r\n ...')
#1 C:\laragon\www\chat\app\Helpers\Database.php(82): App\Helpers\Database::query('SELECT c.*, \r\n ...', Array)
#2 C:\laragon\www\chat\app\Models\Conversation.php(219): App\Helpers\Database::fetchAll('SELECT c.*, \r\n ...', Array)
#3 C:\laragon\www\chat\app\Services\ConversationService.php(165): App\Models\Conversation::getAll(Array)
#4 C:\laragon\www\chat\app\Controllers\ConversationController.php(66): App\Services\ConversationService::list(Array, 1)
#5 [internal function]: App\Controllers\ConversationController->index()
#6 C:\laragon\www\chat\app\Helpers\Router.php(209): call_user_func_array(Array, Array)
#7 C:\laragon\www\chat\app\Helpers\Router.php(133): App\Helpers\Router::callController(Array, Array)
#8 C:\laragon\www\chat\public\index.php(32): App\Helpers\Router::dispatch()
#9 {main}
[2025-12-05 14:07:22] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:07:22] [DEBUG] GET params | Context: {"search":"t"}
[2025-12-05 14:07:22] [ERROR] Erro em Conversation::getAll: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 14:07:22] [ERROR] SQL: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as last_message,
                       (SELECT created_at FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as last_message_at,
                       GROUP_CONCAT(DISTINCT CONCAT(t.id, ':', t.name, ':', COALESCE(t.color, '#009ef7')) SEPARATOR '|||') as tags_data,
                       COALESCE(c.pinned, 0) as pinned,
                       c.pinned_at
                FROM conversations c
                LEFT JOIN contacts ct ON c.contact_id = ct.id
                LEFT JOIN users u ON c.agent_id = u.id
                LEFT JOIN conversation_tags ctt ON c.id = ctt.conversation_id
                LEFT JOIN tags t ON ctt.tag_id = t.id
                WHERE 1=1 AND (
                ct.name LIKE ? OR 
                ct.phone LIKE ? OR 
                ct.email LIKE ? OR 
                c.subject LIKE ? OR
                EXISTS (
                    SELECT 1 FROM messages m 
                    WHERE m.conversation_id = c.id 
                    AND m.content LIKE ?
                )
            ) GROUP BY c.id ORDER BY c.pinned DESC, c.pinned_at DESC, c.updated_at DESC LIMIT 50 OFFSET 0
[2025-12-05 14:07:22] [ERROR] Params | Context: ["%t%","%t%","%t%","%t%","%t%"]
[2025-12-05 14:07:22] [ERROR] Filtros | Context: {"search":"t","limit":50,"offset":0}
[2025-12-05 14:07:22] [ERROR] Erro em ConversationService::list: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 14:07:22] [ERROR] Filtros | Context: {"search":"t","limit":50,"offset":0}
[2025-12-05 14:07:22] [ERROR] Stack trace: #0 C:\laragon\www\chat\app\Helpers\Database.php(62): PDO->prepare('SELECT c.*, \r\n ...')
#1 C:\laragon\www\chat\app\Helpers\Database.php(82): App\Helpers\Database::query('SELECT c.*, \r\n ...', Array)
#2 C:\laragon\www\chat\app\Models\Conversation.php(219): App\Helpers\Database::fetchAll('SELECT c.*, \r\n ...', Array)
#3 C:\laragon\www\chat\app\Services\ConversationService.php(165): App\Models\Conversation::getAll(Array)
#4 C:\laragon\www\chat\app\Controllers\ConversationController.php(66): App\Services\ConversationService::list(Array, 1)
#5 [internal function]: App\Controllers\ConversationController->index()
#6 C:\laragon\www\chat\app\Helpers\Router.php(209): call_user_func_array(Array, Array)
#7 C:\laragon\www\chat\app\Helpers\Router.php(133): App\Helpers\Router::callController(Array, Array)
#8 C:\laragon\www\chat\public\index.php(32): App\Helpers\Router::dispatch()
#9 {main}
[2025-12-05 14:07:22] [ERROR] Erro no ConversationController::index: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 14:07:22] [ERROR] Stack trace: #0 C:\laragon\www\chat\app\Helpers\Database.php(62): PDO->prepare('SELECT c.*, \r\n ...')
#1 C:\laragon\www\chat\app\Helpers\Database.php(82): App\Helpers\Database::query('SELECT c.*, \r\n ...', Array)
#2 C:\laragon\www\chat\app\Models\Conversation.php(219): App\Helpers\Database::fetchAll('SELECT c.*, \r\n ...', Array)
#3 C:\laragon\www\chat\app\Services\ConversationService.php(165): App\Models\Conversation::getAll(Array)
#4 C:\laragon\www\chat\app\Controllers\ConversationController.php(66): App\Services\ConversationService::list(Array, 1)
#5 [internal function]: App\Controllers\ConversationController->index()
#6 C:\laragon\www\chat\app\Helpers\Router.php(209): call_user_func_array(Array, Array)
#7 C:\laragon\www\chat\app\Helpers\Router.php(133): App\Helpers\Router::callController(Array, Array)
#8 C:\laragon\www\chat\public\index.php(32): App\Helpers\Router::dispatch()
#9 {main}
[2025-12-05 14:07:32] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:07:32] [DEBUG] GET params | Context: {"search":"t"}
[2025-12-05 14:07:32] [ERROR] Erro em Conversation::getAll: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 14:07:32] [ERROR] SQL: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as last_message,
                       (SELECT created_at FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as last_message_at,
                       GROUP_CONCAT(DISTINCT CONCAT(t.id, ':', t.name, ':', COALESCE(t.color, '#009ef7')) SEPARATOR '|||') as tags_data,
                       COALESCE(c.pinned, 0) as pinned,
                       c.pinned_at
                FROM conversations c
                LEFT JOIN contacts ct ON c.contact_id = ct.id
                LEFT JOIN users u ON c.agent_id = u.id
                LEFT JOIN conversation_tags ctt ON c.id = ctt.conversation_id
                LEFT JOIN tags t ON ctt.tag_id = t.id
                WHERE 1=1 AND (
                ct.name LIKE ? OR 
                ct.phone LIKE ? OR 
                ct.email LIKE ? OR 
                c.subject LIKE ? OR
                EXISTS (
                    SELECT 1 FROM messages m 
                    WHERE m.conversation_id = c.id 
                    AND m.content LIKE ?
                )
            ) GROUP BY c.id ORDER BY c.pinned DESC, c.pinned_at DESC, c.updated_at DESC LIMIT 50 OFFSET 0
[2025-12-05 14:07:32] [ERROR] Params | Context: ["%t%","%t%","%t%","%t%","%t%"]
[2025-12-05 14:07:32] [ERROR] Filtros | Context: {"search":"t","limit":50,"offset":0}
[2025-12-05 14:07:32] [ERROR] Erro em ConversationService::list: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 14:07:32] [ERROR] Filtros | Context: {"search":"t","limit":50,"offset":0}
[2025-12-05 14:07:32] [ERROR] Stack trace: #0 C:\laragon\www\chat\app\Helpers\Database.php(62): PDO->prepare('SELECT c.*, \r\n ...')
#1 C:\laragon\www\chat\app\Helpers\Database.php(82): App\Helpers\Database::query('SELECT c.*, \r\n ...', Array)
#2 C:\laragon\www\chat\app\Models\Conversation.php(219): App\Helpers\Database::fetchAll('SELECT c.*, \r\n ...', Array)
#3 C:\laragon\www\chat\app\Services\ConversationService.php(165): App\Models\Conversation::getAll(Array)
#4 C:\laragon\www\chat\app\Controllers\ConversationController.php(66): App\Services\ConversationService::list(Array, 1)
#5 [internal function]: App\Controllers\ConversationController->index()
#6 C:\laragon\www\chat\app\Helpers\Router.php(209): call_user_func_array(Array, Array)
#7 C:\laragon\www\chat\app\Helpers\Router.php(133): App\Helpers\Router::callController(Array, Array)
#8 C:\laragon\www\chat\public\index.php(32): App\Helpers\Router::dispatch()
#9 {main}
[2025-12-05 14:07:32] [ERROR] Erro no ConversationController::index: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 14:07:32] [ERROR] Stack trace: #0 C:\laragon\www\chat\app\Helpers\Database.php(62): PDO->prepare('SELECT c.*, \r\n ...')
#1 C:\laragon\www\chat\app\Helpers\Database.php(82): App\Helpers\Database::query('SELECT c.*, \r\n ...', Array)
#2 C:\laragon\www\chat\app\Models\Conversation.php(219): App\Helpers\Database::fetchAll('SELECT c.*, \r\n ...', Array)
#3 C:\laragon\www\chat\app\Services\ConversationService.php(165): App\Models\Conversation::getAll(Array)
#4 C:\laragon\www\chat\app\Controllers\ConversationController.php(66): App\Services\ConversationService::list(Array, 1)
#5 [internal function]: App\Controllers\ConversationController->index()
#6 C:\laragon\www\chat\app\Helpers\Router.php(209): call_user_func_array(Array, Array)
#7 C:\laragon\www\chat\app\Helpers\Router.php(133): App\Helpers\Router::callController(Array, Array)
#8 C:\laragon\www\chat\public\index.php(32): App\Helpers\Router::dispatch()
#9 {main}
[2025-12-05 14:07:42] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:07:42] [DEBUG] GET params | Context: {"search":"t"}
[2025-12-05 14:07:42] [ERROR] Erro em Conversation::getAll: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 14:07:42] [ERROR] SQL: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as last_message,
                       (SELECT created_at FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as last_message_at,
                       GROUP_CONCAT(DISTINCT CONCAT(t.id, ':', t.name, ':', COALESCE(t.color, '#009ef7')) SEPARATOR '|||') as tags_data,
                       COALESCE(c.pinned, 0) as pinned,
                       c.pinned_at
                FROM conversations c
                LEFT JOIN contacts ct ON c.contact_id = ct.id
                LEFT JOIN users u ON c.agent_id = u.id
                LEFT JOIN conversation_tags ctt ON c.id = ctt.conversation_id
                LEFT JOIN tags t ON ctt.tag_id = t.id
                WHERE 1=1 AND (
                ct.name LIKE ? OR 
                ct.phone LIKE ? OR 
                ct.email LIKE ? OR 
                c.subject LIKE ? OR
                EXISTS (
                    SELECT 1 FROM messages m 
                    WHERE m.conversation_id = c.id 
                    AND m.content LIKE ?
                )
            ) GROUP BY c.id ORDER BY c.pinned DESC, c.pinned_at DESC, c.updated_at DESC LIMIT 50 OFFSET 0
[2025-12-05 14:07:42] [ERROR] Params | Context: ["%t%","%t%","%t%","%t%","%t%"]
[2025-12-05 14:07:42] [ERROR] Filtros | Context: {"search":"t","limit":50,"offset":0}
[2025-12-05 14:07:42] [ERROR] Erro em ConversationService::list: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 14:07:42] [ERROR] Filtros | Context: {"search":"t","limit":50,"offset":0}
[2025-12-05 14:07:42] [ERROR] Stack trace: #0 C:\laragon\www\chat\app\Helpers\Database.php(62): PDO->prepare('SELECT c.*, \r\n ...')
#1 C:\laragon\www\chat\app\Helpers\Database.php(82): App\Helpers\Database::query('SELECT c.*, \r\n ...', Array)
#2 C:\laragon\www\chat\app\Models\Conversation.php(219): App\Helpers\Database::fetchAll('SELECT c.*, \r\n ...', Array)
#3 C:\laragon\www\chat\app\Services\ConversationService.php(165): App\Models\Conversation::getAll(Array)
#4 C:\laragon\www\chat\app\Controllers\ConversationController.php(66): App\Services\ConversationService::list(Array, 1)
#5 [internal function]: App\Controllers\ConversationController->index()
#6 C:\laragon\www\chat\app\Helpers\Router.php(209): call_user_func_array(Array, Array)
#7 C:\laragon\www\chat\app\Helpers\Router.php(133): App\Helpers\Router::callController(Array, Array)
#8 C:\laragon\www\chat\public\index.php(32): App\Helpers\Router::dispatch()
#9 {main}
[2025-12-05 14:07:42] [ERROR] Erro no ConversationController::index: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 14:07:42] [ERROR] Stack trace: #0 C:\laragon\www\chat\app\Helpers\Database.php(62): PDO->prepare('SELECT c.*, \r\n ...')
#1 C:\laragon\www\chat\app\Helpers\Database.php(82): App\Helpers\Database::query('SELECT c.*, \r\n ...', Array)
#2 C:\laragon\www\chat\app\Models\Conversation.php(219): App\Helpers\Database::fetchAll('SELECT c.*, \r\n ...', Array)
#3 C:\laragon\www\chat\app\Services\ConversationService.php(165): App\Models\Conversation::getAll(Array)
#4 C:\laragon\www\chat\app\Controllers\ConversationController.php(66): App\Services\ConversationService::list(Array, 1)
#5 [internal function]: App\Controllers\ConversationController->index()
#6 C:\laragon\www\chat\app\Helpers\Router.php(209): call_user_func_array(Array, Array)
#7 C:\laragon\www\chat\app\Helpers\Router.php(133): App\Helpers\Router::callController(Array, Array)
#8 C:\laragon\www\chat\public\index.php(32): App\Helpers\Router::dispatch()
#9 {main}
[2025-12-05 14:07:52] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:07:52] [DEBUG] GET params | Context: {"search":"t"}
[2025-12-05 14:07:52] [ERROR] Erro em Conversation::getAll: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 14:07:52] [ERROR] SQL: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as last_message,
                       (SELECT created_at FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as last_message_at,
                       GROUP_CONCAT(DISTINCT CONCAT(t.id, ':', t.name, ':', COALESCE(t.color, '#009ef7')) SEPARATOR '|||') as tags_data,
                       COALESCE(c.pinned, 0) as pinned,
                       c.pinned_at
                FROM conversations c
                LEFT JOIN contacts ct ON c.contact_id = ct.id
                LEFT JOIN users u ON c.agent_id = u.id
                LEFT JOIN conversation_tags ctt ON c.id = ctt.conversation_id
                LEFT JOIN tags t ON ctt.tag_id = t.id
                WHERE 1=1 AND (
                ct.name LIKE ? OR 
                ct.phone LIKE ? OR 
                ct.email LIKE ? OR 
                c.subject LIKE ? OR
                EXISTS (
                    SELECT 1 FROM messages m 
                    WHERE m.conversation_id = c.id 
                    AND m.content LIKE ?
                )
            ) GROUP BY c.id ORDER BY c.pinned DESC, c.pinned_at DESC, c.updated_at DESC LIMIT 50 OFFSET 0
[2025-12-05 14:07:52] [ERROR] Params | Context: ["%t%","%t%","%t%","%t%","%t%"]
[2025-12-05 14:07:52] [ERROR] Filtros | Context: {"search":"t","limit":50,"offset":0}
[2025-12-05 14:07:52] [ERROR] Erro em ConversationService::list: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 14:07:52] [ERROR] Filtros | Context: {"search":"t","limit":50,"offset":0}
[2025-12-05 14:07:52] [ERROR] Stack trace: #0 C:\laragon\www\chat\app\Helpers\Database.php(62): PDO->prepare('SELECT c.*, \r\n ...')
#1 C:\laragon\www\chat\app\Helpers\Database.php(82): App\Helpers\Database::query('SELECT c.*, \r\n ...', Array)
#2 C:\laragon\www\chat\app\Models\Conversation.php(219): App\Helpers\Database::fetchAll('SELECT c.*, \r\n ...', Array)
#3 C:\laragon\www\chat\app\Services\ConversationService.php(165): App\Models\Conversation::getAll(Array)
#4 C:\laragon\www\chat\app\Controllers\ConversationController.php(66): App\Services\ConversationService::list(Array, 1)
#5 [internal function]: App\Controllers\ConversationController->index()
#6 C:\laragon\www\chat\app\Helpers\Router.php(209): call_user_func_array(Array, Array)
#7 C:\laragon\www\chat\app\Helpers\Router.php(133): App\Helpers\Router::callController(Array, Array)
#8 C:\laragon\www\chat\public\index.php(32): App\Helpers\Router::dispatch()
#9 {main}
[2025-12-05 14:07:52] [ERROR] Erro no ConversationController::index: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 14:07:52] [ERROR] Stack trace: #0 C:\laragon\www\chat\app\Helpers\Database.php(62): PDO->prepare('SELECT c.*, \r\n ...')
#1 C:\laragon\www\chat\app\Helpers\Database.php(82): App\Helpers\Database::query('SELECT c.*, \r\n ...', Array)
#2 C:\laragon\www\chat\app\Models\Conversation.php(219): App\Helpers\Database::fetchAll('SELECT c.*, \r\n ...', Array)
#3 C:\laragon\www\chat\app\Services\ConversationService.php(165): App\Models\Conversation::getAll(Array)
#4 C:\laragon\www\chat\app\Controllers\ConversationController.php(66): App\Services\ConversationService::list(Array, 1)
#5 [internal function]: App\Controllers\ConversationController->index()
#6 C:\laragon\www\chat\app\Helpers\Router.php(209): call_user_func_array(Array, Array)
#7 C:\laragon\www\chat\app\Helpers\Router.php(133): App\Helpers\Router::callController(Array, Array)
#8 C:\laragon\www\chat\public\index.php(32): App\Helpers\Router::dispatch()
#9 {main}
[2025-12-05 14:08:02] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:08:02] [DEBUG] GET params | Context: {"search":"t"}
[2025-12-05 14:08:02] [ERROR] Erro em Conversation::getAll: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 14:08:02] [ERROR] SQL: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as last_message,
                       (SELECT created_at FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as last_message_at,
                       GROUP_CONCAT(DISTINCT CONCAT(t.id, ':', t.name, ':', COALESCE(t.color, '#009ef7')) SEPARATOR '|||') as tags_data,
                       COALESCE(c.pinned, 0) as pinned,
                       c.pinned_at
                FROM conversations c
                LEFT JOIN contacts ct ON c.contact_id = ct.id
                LEFT JOIN users u ON c.agent_id = u.id
                LEFT JOIN conversation_tags ctt ON c.id = ctt.conversation_id
                LEFT JOIN tags t ON ctt.tag_id = t.id
                WHERE 1=1 AND (
                ct.name LIKE ? OR 
                ct.phone LIKE ? OR 
                ct.email LIKE ? OR 
                c.subject LIKE ? OR
                EXISTS (
                    SELECT 1 FROM messages m 
                    WHERE m.conversation_id = c.id 
                    AND m.content LIKE ?
                )
            ) GROUP BY c.id ORDER BY c.pinned DESC, c.pinned_at DESC, c.updated_at DESC LIMIT 50 OFFSET 0
[2025-12-05 14:08:02] [ERROR] Params | Context: ["%t%","%t%","%t%","%t%","%t%"]
[2025-12-05 14:08:02] [ERROR] Filtros | Context: {"search":"t","limit":50,"offset":0}
[2025-12-05 14:08:02] [ERROR] Erro em ConversationService::list: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 14:08:02] [ERROR] Filtros | Context: {"search":"t","limit":50,"offset":0}
[2025-12-05 14:08:02] [ERROR] Stack trace: #0 C:\laragon\www\chat\app\Helpers\Database.php(62): PDO->prepare('SELECT c.*, \r\n ...')
#1 C:\laragon\www\chat\app\Helpers\Database.php(82): App\Helpers\Database::query('SELECT c.*, \r\n ...', Array)
#2 C:\laragon\www\chat\app\Models\Conversation.php(219): App\Helpers\Database::fetchAll('SELECT c.*, \r\n ...', Array)
#3 C:\laragon\www\chat\app\Services\ConversationService.php(165): App\Models\Conversation::getAll(Array)
#4 C:\laragon\www\chat\app\Controllers\ConversationController.php(66): App\Services\ConversationService::list(Array, 1)
#5 [internal function]: App\Controllers\ConversationController->index()
#6 C:\laragon\www\chat\app\Helpers\Router.php(209): call_user_func_array(Array, Array)
#7 C:\laragon\www\chat\app\Helpers\Router.php(133): App\Helpers\Router::callController(Array, Array)
#8 C:\laragon\www\chat\public\index.php(32): App\Helpers\Router::dispatch()
#9 {main}
[2025-12-05 14:08:02] [ERROR] Erro no ConversationController::index: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 14:08:02] [ERROR] Stack trace: #0 C:\laragon\www\chat\app\Helpers\Database.php(62): PDO->prepare('SELECT c.*, \r\n ...')
#1 C:\laragon\www\chat\app\Helpers\Database.php(82): App\Helpers\Database::query('SELECT c.*, \r\n ...', Array)
#2 C:\laragon\www\chat\app\Models\Conversation.php(219): App\Helpers\Database::fetchAll('SELECT c.*, \r\n ...', Array)
#3 C:\laragon\www\chat\app\Services\ConversationService.php(165): App\Models\Conversation::getAll(Array)
#4 C:\laragon\www\chat\app\Controllers\ConversationController.php(66): App\Services\ConversationService::list(Array, 1)
#5 [internal function]: App\Controllers\ConversationController->index()
#6 C:\laragon\www\chat\app\Helpers\Router.php(209): call_user_func_array(Array, Array)
#7 C:\laragon\www\chat\app\Helpers\Router.php(133): App\Helpers\Router::callController(Array, Array)
#8 C:\laragon\www\chat\public\index.php(32): App\Helpers\Router::dispatch()
#9 {main}
[2025-12-05 14:08:12] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:08:12] [DEBUG] GET params | Context: {"search":"t"}
[2025-12-05 14:08:12] [ERROR] Erro em Conversation::getAll: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 14:08:12] [ERROR] SQL: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as last_message,
                       (SELECT created_at FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as last_message_at,
                       GROUP_CONCAT(DISTINCT CONCAT(t.id, ':', t.name, ':', COALESCE(t.color, '#009ef7')) SEPARATOR '|||') as tags_data,
                       COALESCE(c.pinned, 0) as pinned,
                       c.pinned_at
                FROM conversations c
                LEFT JOIN contacts ct ON c.contact_id = ct.id
                LEFT JOIN users u ON c.agent_id = u.id
                LEFT JOIN conversation_tags ctt ON c.id = ctt.conversation_id
                LEFT JOIN tags t ON ctt.tag_id = t.id
                WHERE 1=1 AND (
                ct.name LIKE ? OR 
                ct.phone LIKE ? OR 
                ct.email LIKE ? OR 
                c.subject LIKE ? OR
                EXISTS (
                    SELECT 1 FROM messages m 
                    WHERE m.conversation_id = c.id 
                    AND m.content LIKE ?
                )
            ) GROUP BY c.id ORDER BY c.pinned DESC, c.pinned_at DESC, c.updated_at DESC LIMIT 50 OFFSET 0
[2025-12-05 14:08:12] [ERROR] Params | Context: ["%t%","%t%","%t%","%t%","%t%"]
[2025-12-05 14:08:12] [ERROR] Filtros | Context: {"search":"t","limit":50,"offset":0}
[2025-12-05 14:08:12] [ERROR] Erro em ConversationService::list: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 14:08:12] [ERROR] Filtros | Context: {"search":"t","limit":50,"offset":0}
[2025-12-05 14:08:12] [ERROR] Stack trace: #0 C:\laragon\www\chat\app\Helpers\Database.php(62): PDO->prepare('SELECT c.*, \r\n ...')
#1 C:\laragon\www\chat\app\Helpers\Database.php(82): App\Helpers\Database::query('SELECT c.*, \r\n ...', Array)
#2 C:\laragon\www\chat\app\Models\Conversation.php(219): App\Helpers\Database::fetchAll('SELECT c.*, \r\n ...', Array)
#3 C:\laragon\www\chat\app\Services\ConversationService.php(165): App\Models\Conversation::getAll(Array)
#4 C:\laragon\www\chat\app\Controllers\ConversationController.php(66): App\Services\ConversationService::list(Array, 1)
#5 [internal function]: App\Controllers\ConversationController->index()
#6 C:\laragon\www\chat\app\Helpers\Router.php(209): call_user_func_array(Array, Array)
#7 C:\laragon\www\chat\app\Helpers\Router.php(133): App\Helpers\Router::callController(Array, Array)
#8 C:\laragon\www\chat\public\index.php(32): App\Helpers\Router::dispatch()
#9 {main}
[2025-12-05 14:08:12] [ERROR] Erro no ConversationController::index: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 14:08:12] [ERROR] Stack trace: #0 C:\laragon\www\chat\app\Helpers\Database.php(62): PDO->prepare('SELECT c.*, \r\n ...')
#1 C:\laragon\www\chat\app\Helpers\Database.php(82): App\Helpers\Database::query('SELECT c.*, \r\n ...', Array)
#2 C:\laragon\www\chat\app\Models\Conversation.php(219): App\Helpers\Database::fetchAll('SELECT c.*, \r\n ...', Array)
#3 C:\laragon\www\chat\app\Services\ConversationService.php(165): App\Models\Conversation::getAll(Array)
#4 C:\laragon\www\chat\app\Controllers\ConversationController.php(66): App\Services\ConversationService::list(Array, 1)
#5 [internal function]: App\Controllers\ConversationController->index()
#6 C:\laragon\www\chat\app\Helpers\Router.php(209): call_user_func_array(Array, Array)
#7 C:\laragon\www\chat\app\Helpers\Router.php(133): App\Helpers\Router::callController(Array, Array)
#8 C:\laragon\www\chat\public\index.php(32): App\Helpers\Router::dispatch()
#9 {main}
[2025-12-05 14:08:22] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:08:22] [DEBUG] GET params | Context: {"search":"t"}
[2025-12-05 14:08:22] [ERROR] Erro em Conversation::getAll: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 14:08:22] [ERROR] SQL: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as last_message,
                       (SELECT created_at FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as last_message_at,
                       GROUP_CONCAT(DISTINCT CONCAT(t.id, ':', t.name, ':', COALESCE(t.color, '#009ef7')) SEPARATOR '|||') as tags_data,
                       COALESCE(c.pinned, 0) as pinned,
                       c.pinned_at
                FROM conversations c
                LEFT JOIN contacts ct ON c.contact_id = ct.id
                LEFT JOIN users u ON c.agent_id = u.id
                LEFT JOIN conversation_tags ctt ON c.id = ctt.conversation_id
                LEFT JOIN tags t ON ctt.tag_id = t.id
                WHERE 1=1 AND (
                ct.name LIKE ? OR 
                ct.phone LIKE ? OR 
                ct.email LIKE ? OR 
                c.subject LIKE ? OR
                EXISTS (
                    SELECT 1 FROM messages m 
                    WHERE m.conversation_id = c.id 
                    AND m.content LIKE ?
                )
            ) GROUP BY c.id ORDER BY c.pinned DESC, c.pinned_at DESC, c.updated_at DESC LIMIT 50 OFFSET 0
[2025-12-05 14:08:22] [ERROR] Params | Context: ["%t%","%t%","%t%","%t%","%t%"]
[2025-12-05 14:08:22] [ERROR] Filtros | Context: {"search":"t","limit":50,"offset":0}
[2025-12-05 14:08:22] [ERROR] Erro em ConversationService::list: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 14:08:22] [ERROR] Filtros | Context: {"search":"t","limit":50,"offset":0}
[2025-12-05 14:08:22] [ERROR] Stack trace: #0 C:\laragon\www\chat\app\Helpers\Database.php(62): PDO->prepare('SELECT c.*, \r\n ...')
#1 C:\laragon\www\chat\app\Helpers\Database.php(82): App\Helpers\Database::query('SELECT c.*, \r\n ...', Array)
#2 C:\laragon\www\chat\app\Models\Conversation.php(219): App\Helpers\Database::fetchAll('SELECT c.*, \r\n ...', Array)
#3 C:\laragon\www\chat\app\Services\ConversationService.php(165): App\Models\Conversation::getAll(Array)
#4 C:\laragon\www\chat\app\Controllers\ConversationController.php(66): App\Services\ConversationService::list(Array, 1)
#5 [internal function]: App\Controllers\ConversationController->index()
#6 C:\laragon\www\chat\app\Helpers\Router.php(209): call_user_func_array(Array, Array)
#7 C:\laragon\www\chat\app\Helpers\Router.php(133): App\Helpers\Router::callController(Array, Array)
#8 C:\laragon\www\chat\public\index.php(32): App\Helpers\Router::dispatch()
#9 {main}
[2025-12-05 14:08:22] [ERROR] Erro no ConversationController::index: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'c.subject' in 'where clause'
[2025-12-05 14:08:22] [ERROR] Stack trace: #0 C:\laragon\www\chat\app\Helpers\Database.php(62): PDO->prepare('SELECT c.*, \r\n ...')
#1 C:\laragon\www\chat\app\Helpers\Database.php(82): App\Helpers\Database::query('SELECT c.*, \r\n ...', Array)
#2 C:\laragon\www\chat\app\Models\Conversation.php(219): App\Helpers\Database::fetchAll('SELECT c.*, \r\n ...', Array)
#3 C:\laragon\www\chat\app\Services\ConversationService.php(165): App\Models\Conversation::getAll(Array)
#4 C:\laragon\www\chat\app\Controllers\ConversationController.php(66): App\Services\ConversationService::list(Array, 1)
#5 [internal function]: App\Controllers\ConversationController->index()
#6 C:\laragon\www\chat\app\Helpers\Router.php(209): call_user_func_array(Array, Array)
#7 C:\laragon\www\chat\app\Helpers\Router.php(133): App\Helpers\Router::callController(Array, Array)
#8 C:\laragon\www\chat\public\index.php(32): App\Helpers\Router::dispatch()
#9 {main}
[2025-12-05 14:08:32] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:08:32] [DEBUG] GET params | Context: {"search":"t"}
[2025-12-05 14:08:42] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:08:42] [DEBUG] GET params | Context: {"search":"t"}
[2025-12-05 14:08:52] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:08:52] [DEBUG] GET params | Context: {"search":"t"}
[2025-12-05 14:09:02] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:09:02] [DEBUG] GET params | Context: {"search":"t"}
[2025-12-05 14:09:26] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:09:26] [DEBUG] GET params | Context: {"search":"t"}
[2025-12-05 14:10:26] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:10:26] [DEBUG] GET params | Context: {"search":"t"}
[2025-12-05 14:10:30] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:10:30] [DEBUG] GET params | Context: {"search":"t","id":"1"}
[2025-12-05 14:10:34] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:10:34] [DEBUG] GET params
[2025-12-05 14:10:37] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:10:37] [DEBUG] GET params | Context: {"search":"o"}
[2025-12-05 14:10:38] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:10:38] [DEBUG] GET params | Context: {"search":"ocu"}
[2025-12-05 14:10:40] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:10:40] [DEBUG] GET params | Context: {"search":"ocupa"}
[2025-12-05 14:10:40] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:10:40] [DEBUG] GET params | Context: {"search":"ocupa"}
[2025-12-05 14:10:42] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:10:42] [DEBUG] GET params | Context: {"search":"ocupado"}
[2025-12-05 14:10:50] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:10:50] [DEBUG] GET params | Context: {"search":"ocupado"}
[2025-12-05 14:10:52] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:10:52] [DEBUG] GET params | Context: {"search":"teste"}
[2025-12-05 14:10:55] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:10:55] [DEBUG] GET params | Context: {"search":"te"}
[2025-12-05 14:10:58] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:10:58] [DEBUG] GET params | Context: {"search":"tasdsadasd"}
[2025-12-05 14:11:00] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:11:00] [DEBUG] GET params | Context: {"search":"tasdsadasdasd"}
[2025-12-05 14:11:00] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:11:00] [DEBUG] GET params | Context: {"search":"tasdsadasdasd"}
[2025-12-05 14:11:10] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:11:10] [DEBUG] GET params | Context: {"search":"tasdsadasdasd"}
[2025-12-05 14:11:20] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:11:20] [DEBUG] GET params | Context: {"search":"tasdsadasdasd"}
[2025-12-05 14:11:30] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:11:30] [DEBUG] GET params | Context: {"search":"tasdsadasdasd"}
[2025-12-05 14:11:40] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:11:40] [DEBUG] GET params | Context: {"search":"tasdsadasdasd"}
[2025-12-05 14:11:50] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:11:50] [DEBUG] GET params | Context: {"search":"tasdsadasdasd"}
[2025-12-05 14:12:00] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:12:00] [DEBUG] GET params | Context: {"search":"tasdsadasdasd"}
[2025-12-05 14:12:10] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:12:10] [DEBUG] GET params | Context: {"search":"tasdsadasdasd"}
[2025-12-05 14:12:20] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:12:20] [DEBUG] GET params | Context: {"search":"tasdsadasdasd"}
[2025-12-05 14:12:30] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:12:30] [DEBUG] GET params | Context: {"search":"tasdsadasdasd"}
[2025-12-05 14:13:26] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:13:26] [DEBUG] GET params | Context: {"search":"tasdsadasdasd"}
[2025-12-05 14:13:52] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:13:52] [DEBUG] GET params | Context: {"search":"tasdsadasdasd"}
[2025-12-05 14:13:52] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:13:52] [DEBUG] GET params | Context: {"search":"tasdsadasdasd","id":"1"}
[2025-12-05 14:13:53] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:13:53] [DEBUG] GET params | Context: {"search":"tasdsadasdasd","id":"1"}
[2025-12-05 14:13:57] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:13:57] [DEBUG] GET params
[2025-12-05 14:14:01] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:14:01] [DEBUG] GET params | Context: {"search":"ocup","format":"json"}
[2025-12-05 14:14:03] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:14:03] [DEBUG] GET params | Context: {"search":"ocupa","format":"json"}
[2025-12-05 14:14:04] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:14:04] [DEBUG] GET params | Context: {"search":"ocupad","format":"json"}
[2025-12-05 14:14:06] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:14:06] [DEBUG] GET params | Context: {"search":"ocupadp","format":"json"}
[2025-12-05 14:14:07] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:14:07] [DEBUG] GET params | Context: {"search":"ocupadp"}
[2025-12-05 14:14:07] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:14:07] [DEBUG] GET params | Context: {"search":"ocupadpasdad","format":"json"}
[2025-12-05 14:14:08] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:14:08] [DEBUG] GET params | Context: {"search":"ocupadpasdad adasd","format":"json"}
[2025-12-05 14:14:17] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:14:17] [DEBUG] GET params | Context: {"search":"ocupadpasdad adasd"}
[2025-12-05 14:14:27] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:14:27] [DEBUG] GET params | Context: {"search":"ocupadpasdad adasd"}
[2025-12-05 14:14:37] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:14:37] [DEBUG] GET params | Context: {"search":"ocupadpasdad adasd"}
[2025-12-05 14:14:47] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:14:47] [DEBUG] GET params | Context: {"search":"ocupadpasdad adasd"}
[2025-12-05 14:14:57] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:14:57] [DEBUG] GET params | Context: {"search":"ocupadpasdad adasd"}
[2025-12-05 14:15:07] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:15:07] [DEBUG] GET params | Context: {"search":"ocupadpasdad adasd"}
[2025-12-05 14:15:17] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:15:17] [DEBUG] GET params | Context: {"search":"ocupadpasdad adasd"}
[2025-12-05 14:15:17] [DEBUG] Aplicando filtro de busca: 'ocupadpasdad adasd'
[2025-12-05 14:15:27] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:15:27] [DEBUG] GET params | Context: {"search":"ocupadpasdad adasd"}
[2025-12-05 14:15:27] [DEBUG] Filtros aps limpeza | Context: {"search":"ocupadpasdad adasd","limit":50,"offset":0}
[2025-12-05 14:15:27] [DEBUG] Aplicando filtro de busca: 'ocupadpasdad adasd'
[2025-12-05 14:15:37] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:15:37] [DEBUG] GET params | Context: {"search":"ocupadpasdad adasd"}
[2025-12-05 14:15:37] [DEBUG] Filtros aps limpeza | Context: {"search":"ocupadpasdad adasd","limit":50,"offset":0}
[2025-12-05 14:15:37] [DEBUG] Aplicando filtro de busca: 'ocupadpasdad adasd'
[2025-12-05 14:15:47] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:15:47] [DEBUG] GET params | Context: {"search":"ocupadpasdad adasd"}
[2025-12-05 14:15:47] [DEBUG] Filtros aps limpeza | Context: {"search":"ocupadpasdad adasd","limit":50,"offset":0}
[2025-12-05 14:15:47] [DEBUG] Aplicando filtro de busca: 'ocupadpasdad adasd'
[2025-12-05 14:15:47] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-05 14:15:47] [DEBUG] SQL Params | Context: ["%ocupadpasdad adasd%","%ocupadpasdad adasd%","%ocupadpasdad adasd%","%ocupadpasdad adasd%"]
[2025-12-05 14:15:47] [DEBUG] Conversas retornadas do banco: 0
[2025-12-05 14:15:57] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:15:57] [DEBUG] GET params | Context: {"search":"ocupadpasdad adasd"}
[2025-12-05 14:15:57] [DEBUG] Filtros aps limpeza | Context: {"search":"ocupadpasdad adasd","limit":50,"offset":0}
[2025-12-05 14:15:57] [DEBUG] Aplicando filtro de busca: 'ocupadpasdad adasd'
[2025-12-05 14:15:57] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-05 14:15:57] [DEBUG] SQL Params | Context: ["%ocupadpasdad adasd%","%ocupadpasdad adasd%","%ocupadpasdad adasd%","%ocupadpasdad adasd%"]
[2025-12-05 14:15:57] [DEBUG] Conversas retornadas do banco: 0
[2025-12-05 14:16:07] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:16:07] [DEBUG] GET params | Context: {"search":"ocupadpasdad adasd"}
[2025-12-05 14:16:07] [DEBUG] Filtros aps limpeza | Context: {"search":"ocupadpasdad adasd","limit":50,"offset":0}
[2025-12-05 14:16:07] [DEBUG] Aplicando filtro de busca: 'ocupadpasdad adasd'
[2025-12-05 14:16:07] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-05 14:16:07] [DEBUG] SQL Params | Context: ["%ocupadpasdad adasd%","%ocupadpasdad adasd%","%ocupadpasdad adasd%","%ocupadpasdad adasd%"]
[2025-12-05 14:16:07] [DEBUG] Conversas retornadas do banco: 0
[2025-12-05 14:16:07] [DEBUG] Conversas retornadas do Service: 0
[2025-12-05 14:16:26] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:16:26] [DEBUG] GET params | Context: {"search":"ocupadpasdad adasd"}
[2025-12-05 14:16:26] [DEBUG] Filtros aps limpeza | Context: {"search":"ocupadpasdad adasd","limit":50,"offset":0}
[2025-12-05 14:16:26] [DEBUG] Aplicando filtro de busca: 'ocupadpasdad adasd'
[2025-12-05 14:16:26] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-05 14:16:26] [DEBUG] SQL Params | Context: ["%ocupadpasdad adasd%","%ocupadpasdad adasd%","%ocupadpasdad adasd%","%ocupadpasdad adasd%"]
[2025-12-05 14:16:26] [DEBUG] Conversas retornadas do banco: 0
[2025-12-05 14:16:26] [DEBUG] Conversas retornadas do Service: 0
[2025-12-05 14:17:26] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:17:26] [DEBUG] GET params | Context: {"search":"ocupadpasdad adasd"}
[2025-12-05 14:17:26] [DEBUG] Filtros aps limpeza | Context: {"search":"ocupadpasdad adasd","limit":50,"offset":0}
[2025-12-05 14:17:26] [DEBUG] Aplicando filtro de busca: 'ocupadpasdad adasd'
[2025-12-05 14:17:26] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-05 14:17:26] [DEBUG] SQL Params | Context: ["%ocupadpasdad adasd%","%ocupadpasdad adasd%","%ocupadpasdad adasd%","%ocupadpasdad adasd%"]
[2025-12-05 14:17:26] [DEBUG] Conversas retornadas do banco: 0
[2025-12-05 14:17:26] [DEBUG] Conversas retornadas do Service: 0
[2025-12-05 14:18:26] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:18:26] [DEBUG] GET params | Context: {"search":"ocupadpasdad adasd"}
[2025-12-05 14:18:26] [DEBUG] Filtros aps limpeza | Context: {"search":"ocupadpasdad adasd","limit":50,"offset":0}
[2025-12-05 14:18:26] [DEBUG] Aplicando filtro de busca: 'ocupadpasdad adasd'
[2025-12-05 14:18:26] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-05 14:18:26] [DEBUG] SQL Params | Context: ["%ocupadpasdad adasd%","%ocupadpasdad adasd%","%ocupadpasdad adasd%","%ocupadpasdad adasd%"]
[2025-12-05 14:18:26] [DEBUG] Conversas retornadas do banco: 0
[2025-12-05 14:18:26] [DEBUG] Conversas retornadas do Service: 0
[2025-12-05 14:19:26] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:19:26] [DEBUG] GET params | Context: {"search":"ocupadpasdad adasd"}
[2025-12-05 14:19:26] [DEBUG] Filtros aps limpeza | Context: {"search":"ocupadpasdad adasd","limit":50,"offset":0}
[2025-12-05 14:19:26] [DEBUG] Aplicando filtro de busca: 'ocupadpasdad adasd'
[2025-12-05 14:19:26] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-05 14:19:26] [DEBUG] SQL Params | Context: ["%ocupadpasdad adasd%","%ocupadpasdad adasd%","%ocupadpasdad adasd%","%ocupadpasdad adasd%"]
[2025-12-05 14:19:26] [DEBUG] Conversas retornadas do banco: 0
[2025-12-05 14:19:26] [DEBUG] Conversas retornadas do Service: 0
[2025-12-05 14:20:26] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:20:26] [DEBUG] GET params | Context: {"search":"ocupadpasdad adasd"}
[2025-12-05 14:20:26] [DEBUG] Filtros aps limpeza | Context: {"search":"ocupadpasdad adasd","limit":50,"offset":0}
[2025-12-05 14:20:26] [DEBUG] Aplicando filtro de busca: 'ocupadpasdad adasd'
[2025-12-05 14:20:26] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-05 14:20:26] [DEBUG] SQL Params | Context: ["%ocupadpasdad adasd%","%ocupadpasdad adasd%","%ocupadpasdad adasd%","%ocupadpasdad adasd%"]
[2025-12-05 14:20:26] [DEBUG] Conversas retornadas do banco: 0
[2025-12-05 14:20:26] [DEBUG] Conversas retornadas do Service: 0
[2025-12-05 14:21:26] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:21:26] [DEBUG] GET params | Context: {"search":"ocupadpasdad adasd"}
[2025-12-05 14:21:26] [DEBUG] Filtros aps limpeza | Context: {"search":"ocupadpasdad adasd","limit":50,"offset":0}
[2025-12-05 14:21:26] [DEBUG] Aplicando filtro de busca: 'ocupadpasdad adasd'
[2025-12-05 14:21:26] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-05 14:21:26] [DEBUG] SQL Params | Context: ["%ocupadpasdad adasd%","%ocupadpasdad adasd%","%ocupadpasdad adasd%","%ocupadpasdad adasd%"]
[2025-12-05 14:21:26] [DEBUG] Conversas retornadas do banco: 0
[2025-12-05 14:21:26] [DEBUG] Conversas retornadas do Service: 0
[2025-12-05 14:22:26] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:22:26] [DEBUG] GET params | Context: {"search":"ocupadpasdad adasd"}
[2025-12-05 14:22:26] [DEBUG] Filtros aps limpeza | Context: {"search":"ocupadpasdad adasd","limit":50,"offset":0}
[2025-12-05 14:22:26] [DEBUG] Aplicando filtro de busca: 'ocupadpasdad adasd'
[2025-12-05 14:22:26] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-05 14:22:26] [DEBUG] SQL Params | Context: ["%ocupadpasdad adasd%","%ocupadpasdad adasd%","%ocupadpasdad adasd%","%ocupadpasdad adasd%"]
[2025-12-05 14:22:26] [DEBUG] Conversas retornadas do banco: 0
[2025-12-05 14:22:26] [DEBUG] Conversas retornadas do Service: 0
[2025-12-05 14:23:26] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:23:26] [DEBUG] GET params | Context: {"search":"ocupadpasdad adasd"}
[2025-12-05 14:23:26] [DEBUG] Filtros aps limpeza | Context: {"search":"ocupadpasdad adasd","limit":50,"offset":0}
[2025-12-05 14:23:26] [DEBUG] Aplicando filtro de busca: 'ocupadpasdad adasd'
[2025-12-05 14:23:26] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-05 14:23:26] [DEBUG] SQL Params | Context: ["%ocupadpasdad adasd%","%ocupadpasdad adasd%","%ocupadpasdad adasd%","%ocupadpasdad adasd%"]
[2025-12-05 14:23:26] [DEBUG] Conversas retornadas do banco: 0
[2025-12-05 14:23:26] [DEBUG] Conversas retornadas do Service: 0
[2025-12-05 14:24:26] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:24:26] [DEBUG] GET params | Context: {"search":"ocupadpasdad adasd"}
[2025-12-05 14:24:26] [DEBUG] Filtros aps limpeza | Context: {"search":"ocupadpasdad adasd","limit":50,"offset":0}
[2025-12-05 14:24:26] [DEBUG] Aplicando filtro de busca: 'ocupadpasdad adasd'
[2025-12-05 14:24:26] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-05 14:24:26] [DEBUG] SQL Params | Context: ["%ocupadpasdad adasd%","%ocupadpasdad adasd%","%ocupadpasdad adasd%","%ocupadpasdad adasd%"]
[2025-12-05 14:24:26] [DEBUG] Conversas retornadas do banco: 0
[2025-12-05 14:24:26] [DEBUG] Conversas retornadas do Service: 0
[2025-12-05 14:25:26] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:25:26] [DEBUG] GET params | Context: {"search":"ocupadpasdad adasd"}
[2025-12-05 14:25:26] [DEBUG] Filtros aps limpeza | Context: {"search":"ocupadpasdad adasd","limit":50,"offset":0}
[2025-12-05 14:25:26] [DEBUG] Aplicando filtro de busca: 'ocupadpasdad adasd'
[2025-12-05 14:25:26] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-05 14:25:26] [DEBUG] SQL Params | Context: ["%ocupadpasdad adasd%","%ocupadpasdad adasd%","%ocupadpasdad adasd%","%ocupadpasdad adasd%"]
[2025-12-05 14:25:26] [DEBUG] Conversas retornadas do banco: 0
[2025-12-05 14:25:26] [DEBUG] Conversas retornadas do Service: 0
[2025-12-05 14:26:26] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:26:26] [DEBUG] GET params | Context: {"search":"ocupadpasdad adasd"}
[2025-12-05 14:26:26] [DEBUG] Filtros aps limpeza | Context: {"search":"ocupadpasdad adasd","limit":50,"offset":0}
[2025-12-05 14:26:26] [DEBUG] Aplicando filtro de busca: 'ocupadpasdad adasd'
[2025-12-05 14:26:26] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-05 14:26:26] [DEBUG] SQL Params | Context: ["%ocupadpasdad adasd%","%ocupadpasdad adasd%","%ocupadpasdad adasd%","%ocupadpasdad adasd%"]
[2025-12-05 14:26:26] [DEBUG] Conversas retornadas do banco: 0
[2025-12-05 14:26:26] [DEBUG] Conversas retornadas do Service: 0
[2025-12-05 14:27:26] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:27:26] [DEBUG] GET params | Context: {"search":"ocupadpasdad adasd"}
[2025-12-05 14:27:26] [DEBUG] Filtros aps limpeza | Context: {"search":"ocupadpasdad adasd","limit":50,"offset":0}
[2025-12-05 14:27:26] [DEBUG] Aplicando filtro de busca: 'ocupadpasdad adasd'
[2025-12-05 14:27:26] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-05 14:27:26] [DEBUG] SQL Params | Context: ["%ocupadpasdad adasd%","%ocupadpasdad adasd%","%ocupadpasdad adasd%","%ocupadpasdad adasd%"]
[2025-12-05 14:27:26] [DEBUG] Conversas retornadas do banco: 0
[2025-12-05 14:27:26] [DEBUG] Conversas retornadas do Service: 0
[2025-12-05 14:28:26] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:28:26] [DEBUG] GET params | Context: {"search":"ocupadpasdad adasd"}
[2025-12-05 14:28:26] [DEBUG] Filtros aps limpeza | Context: {"search":"ocupadpasdad adasd","limit":50,"offset":0}
[2025-12-05 14:28:26] [DEBUG] Aplicando filtro de busca: 'ocupadpasdad adasd'
[2025-12-05 14:28:26] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-05 14:28:26] [DEBUG] SQL Params | Context: ["%ocupadpasdad adasd%","%ocupadpasdad adasd%","%ocupadpasdad adasd%","%ocupadpasdad adasd%"]
[2025-12-05 14:28:26] [DEBUG] Conversas retornadas do banco: 0
[2025-12-05 14:28:26] [DEBUG] Conversas retornadas do Service: 0
[2025-12-05 14:29:08] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:29:08] [DEBUG] GET params | Context: {"search":"ocupadpasdad adasd"}
[2025-12-05 14:29:08] [DEBUG] Filtros aps limpeza | Context: {"search":"ocupadpasdad adasd","limit":50,"offset":0}
[2025-12-05 14:29:08] [DEBUG] Aplicando filtro de busca: 'ocupadpasdad adasd'
[2025-12-05 14:29:08] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-05 14:29:08] [DEBUG] SQL Params | Context: ["%ocupadpasdad adasd%","%ocupadpasdad adasd%","%ocupadpasdad adasd%","%ocupadpasdad adasd%"]
[2025-12-05 14:29:08] [DEBUG] Conversas retornadas do banco: 0
[2025-12-05 14:29:08] [DEBUG] Conversas retornadas do Service: 0
[2025-12-05 14:29:09] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:29:09] [DEBUG] GET params | Context: {"search":"ocupadpasdad adasd"}
[2025-12-05 14:29:09] [DEBUG] Filtros aps limpeza | Context: {"search":"ocupadpasdad adasd","limit":50,"offset":0}
[2025-12-05 14:29:09] [DEBUG] Aplicando filtro de busca: 'ocupadpasdad adasd'
[2025-12-05 14:29:09] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-05 14:29:09] [DEBUG] SQL Params | Context: ["%ocupadpasdad adasd%","%ocupadpasdad adasd%","%ocupadpasdad adasd%","%ocupadpasdad adasd%"]
[2025-12-05 14:29:09] [DEBUG] Conversas retornadas do banco: 0
[2025-12-05 14:29:09] [DEBUG] Conversas retornadas do Service: 0
[2025-12-05 14:29:12] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:29:12] [DEBUG] GET params | Context: {"format":"json"}
[2025-12-05 14:29:12] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:29:12] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-05 14:29:12] [DEBUG] SQL Params
[2025-12-05 14:29:12] [DEBUG] Conversas retornadas do banco: 1
[2025-12-05 14:29:12] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:29:14] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:29:14] [DEBUG] GET params | Context: {"search":"oc","format":"json"}
[2025-12-05 14:29:14] [DEBUG] Filtros aps limpeza | Context: {"search":"oc","limit":50,"offset":0}
[2025-12-05 14:29:14] [DEBUG] Aplicando filtro de busca: 'oc'
[2025-12-05 14:29:14] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-05 14:29:14] [DEBUG] SQL Params | Context: ["%oc%","%oc%","%oc%","%oc%"]
[2025-12-05 14:29:14] [DEBUG] Conversas retornadas do banco: 0
[2025-12-05 14:29:14] [DEBUG] Conversas retornadas do Service: 0
[2025-12-05 14:29:16] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:29:16] [DEBUG] GET params | Context: {"search":"o","format":"json"}
[2025-12-05 14:29:16] [DEBUG] Filtros aps limpeza | Context: {"search":"o","limit":50,"offset":0}
[2025-12-05 14:29:16] [DEBUG] Aplicando filtro de busca: 'o'
[2025-12-05 14:29:16] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-05 14:29:16] [DEBUG] SQL Params | Context: ["%o%","%o%","%o%","%o%"]
[2025-12-05 14:29:16] [DEBUG] Conversas retornadas do banco: 1
[2025-12-05 14:29:16] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:29:17] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:29:17] [DEBUG] GET params | Context: {"format":"json"}
[2025-12-05 14:29:17] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:29:17] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:29:18] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:29:18] [DEBUG] GET params | Context: {"search":"te","format":"json"}
[2025-12-05 14:29:18] [DEBUG] Filtros aps limpeza | Context: {"search":"te","limit":50,"offset":0}
[2025-12-05 14:29:18] [DEBUG] Aplicando filtro de busca: 'te'
[2025-12-05 14:29:18] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-05 14:29:18] [DEBUG] SQL Params | Context: ["%te%","%te%","%te%","%te%"]
[2025-12-05 14:29:18] [DEBUG] Conversas retornadas do banco: 1
[2025-12-05 14:29:18] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:29:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:29:19] [DEBUG] GET params | Context: {"search":"te"}
[2025-12-05 14:29:19] [DEBUG] Filtros aps limpeza | Context: {"search":"te","limit":50,"offset":0}
[2025-12-05 14:29:19] [DEBUG] Aplicando filtro de busca: 'te'
[2025-12-05 14:29:19] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-05 14:29:19] [DEBUG] SQL Params | Context: ["%te%","%te%","%te%","%te%"]
[2025-12-05 14:29:19] [DEBUG] Conversas retornadas do banco: 1
[2025-12-05 14:29:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:29:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:29:19] [DEBUG] GET params | Context: {"search":"tes","format":"json"}
[2025-12-05 14:29:19] [DEBUG] Filtros aps limpeza | Context: {"search":"tes","limit":50,"offset":0}
[2025-12-05 14:29:19] [DEBUG] Aplicando filtro de busca: 'tes'
[2025-12-05 14:29:19] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-05 14:29:19] [DEBUG] SQL Params | Context: ["%tes%","%tes%","%tes%","%tes%"]
[2025-12-05 14:29:19] [DEBUG] Conversas retornadas do banco: 1
[2025-12-05 14:29:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:29:20] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:29:20] [DEBUG] GET params | Context: {"search":"test","format":"json"}
[2025-12-05 14:29:20] [DEBUG] Filtros aps limpeza | Context: {"search":"test","limit":50,"offset":0}
[2025-12-05 14:29:20] [DEBUG] Aplicando filtro de busca: 'test'
[2025-12-05 14:29:20] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-05 14:29:20] [DEBUG] SQL Params | Context: ["%test%","%test%","%test%","%test%"]
[2025-12-05 14:29:20] [DEBUG] Conversas retornadas do banco: 1
[2025-12-05 14:29:20] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:29:21] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:29:21] [DEBUG] GET params | Context: {"search":"teste","format":"json"}
[2025-12-05 14:29:21] [DEBUG] Filtros aps limpeza | Context: {"search":"teste","limit":50,"offset":0}
[2025-12-05 14:29:21] [DEBUG] Aplicando filtro de busca: 'teste'
[2025-12-05 14:29:21] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-05 14:29:21] [DEBUG] SQL Params | Context: ["%teste%","%teste%","%teste%","%teste%"]
[2025-12-05 14:29:21] [DEBUG] Conversas retornadas do banco: 1
[2025-12-05 14:29:21] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:29:23] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:29:23] [DEBUG] GET params | Context: {"format":"json"}
[2025-12-05 14:29:23] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:29:23] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:29:29] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:29:29] [DEBUG] GET params
[2025-12-05 14:29:29] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:29:29] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:29:39] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:29:39] [DEBUG] GET params
[2025-12-05 14:29:39] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:29:39] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:29:49] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:29:49] [DEBUG] GET params
[2025-12-05 14:29:49] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:29:49] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:29:59] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:29:59] [DEBUG] GET params
[2025-12-05 14:29:59] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:29:59] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:30:09] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:30:09] [DEBUG] GET params
[2025-12-05 14:30:09] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:30:09] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:30:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:30:19] [DEBUG] GET params
[2025-12-05 14:30:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:30:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:30:29] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:30:29] [DEBUG] GET params
[2025-12-05 14:30:29] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:30:29] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:30:39] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:30:39] [DEBUG] GET params
[2025-12-05 14:30:39] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:30:39] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:30:49] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:30:49] [DEBUG] GET params
[2025-12-05 14:30:49] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:30:49] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:31:26] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:31:26] [DEBUG] GET params
[2025-12-05 14:31:26] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:31:26] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:32:26] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:32:26] [DEBUG] GET params
[2025-12-05 14:32:26] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:32:26] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:33:26] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:33:26] [DEBUG] GET params
[2025-12-05 14:33:26] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:33:26] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:34:26] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:34:26] [DEBUG] GET params
[2025-12-05 14:34:26] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:34:26] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-05 14:34:26] [DEBUG] SQL Params
[2025-12-05 14:34:26] [DEBUG] Conversas retornadas do banco: 1
[2025-12-05 14:34:26] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:35:26] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:35:26] [DEBUG] GET params
[2025-12-05 14:35:26] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:35:26] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:36:26] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:36:26] [DEBUG] GET params
[2025-12-05 14:36:26] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:36:26] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:37:26] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:37:26] [DEBUG] GET params
[2025-12-05 14:37:26] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:37:26] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:38:26] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:38:26] [DEBUG] GET params
[2025-12-05 14:38:26] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:38:26] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:39:26] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:39:26] [DEBUG] GET params
[2025-12-05 14:39:26] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:39:26] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:40:26] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:40:26] [DEBUG] GET params
[2025-12-05 14:40:26] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:40:26] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-05 14:40:26] [DEBUG] SQL Params
[2025-12-05 14:40:26] [DEBUG] Conversas retornadas do banco: 1
[2025-12-05 14:40:26] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:41:26] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:41:26] [DEBUG] GET params
[2025-12-05 14:41:26] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:41:26] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:42:26] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:42:26] [DEBUG] GET params
[2025-12-05 14:42:26] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:42:26] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:43:26] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:43:26] [DEBUG] GET params
[2025-12-05 14:43:26] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:43:26] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:44:26] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:44:26] [DEBUG] GET params
[2025-12-05 14:44:26] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:44:26] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:44:40] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:44:40] [DEBUG] GET params
[2025-12-05 14:44:40] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:44:40] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:44:40] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:44:40] [DEBUG] GET params
[2025-12-05 14:44:40] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:44:40] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:44:44] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:44:44] [DEBUG] GET params | Context: {"search":"con","format":"json"}
[2025-12-05 14:44:44] [DEBUG] Filtros aps limpeza | Context: {"search":"con","limit":50,"offset":0}
[2025-12-05 14:44:44] [DEBUG] Aplicando filtro de busca: 'con'
[2025-12-05 14:44:44] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-05 14:44:44] [DEBUG] SQL Params | Context: ["%con%","%con%","%con%","%con%"]
[2025-12-05 14:44:44] [DEBUG] Conversas retornadas do banco: 0
[2025-12-05 14:44:44] [DEBUG] Conversas retornadas do Service: 0
[2025-12-05 14:44:47] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:44:47] [DEBUG] GET params | Context: {"format":"json"}
[2025-12-05 14:44:47] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:44:47] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:44:49] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:44:49] [DEBUG] GET params | Context: {"search":"tes","format":"json"}
[2025-12-05 14:44:49] [DEBUG] Filtros aps limpeza | Context: {"search":"tes","limit":50,"offset":0}
[2025-12-05 14:44:49] [DEBUG] Aplicando filtro de busca: 'tes'
[2025-12-05 14:44:49] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-05 14:44:49] [DEBUG] SQL Params | Context: ["%tes%","%tes%","%tes%","%tes%"]
[2025-12-05 14:44:49] [DEBUG] Conversas retornadas do banco: 1
[2025-12-05 14:44:49] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:44:51] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:44:51] [DEBUG] GET params | Context: {"search":"tes"}
[2025-12-05 14:44:51] [DEBUG] Filtros aps limpeza | Context: {"search":"tes","limit":50,"offset":0}
[2025-12-05 14:44:51] [DEBUG] Aplicando filtro de busca: 'tes'
[2025-12-05 14:44:51] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-05 14:44:51] [DEBUG] SQL Params | Context: ["%tes%","%tes%","%tes%","%tes%"]
[2025-12-05 14:44:51] [DEBUG] Conversas retornadas do banco: 1
[2025-12-05 14:44:51] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:44:51] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:44:51] [DEBUG] GET params | Context: {"search":"test","format":"json"}
[2025-12-05 14:44:51] [DEBUG] Filtros aps limpeza | Context: {"search":"test","limit":50,"offset":0}
[2025-12-05 14:44:51] [DEBUG] Aplicando filtro de busca: 'test'
[2025-12-05 14:44:51] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-05 14:44:51] [DEBUG] SQL Params | Context: ["%test%","%test%","%test%","%test%"]
[2025-12-05 14:44:51] [DEBUG] Conversas retornadas do banco: 1
[2025-12-05 14:44:51] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:44:53] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:44:53] [DEBUG] GET params | Context: {"format":"json"}
[2025-12-05 14:44:53] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:44:53] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:44:54] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:44:54] [DEBUG] GET params | Context: {"search":"mar","format":"json"}
[2025-12-05 14:44:54] [DEBUG] Filtros aps limpeza | Context: {"search":"mar","limit":50,"offset":0}
[2025-12-05 14:44:54] [DEBUG] Aplicando filtro de busca: 'mar'
[2025-12-05 14:44:54] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-05 14:44:54] [DEBUG] SQL Params | Context: ["%mar%","%mar%","%mar%","%mar%"]
[2025-12-05 14:44:54] [DEBUG] Conversas retornadas do banco: 1
[2025-12-05 14:44:54] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:44:56] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:44:56] [DEBUG] GET params | Context: {"search":"maria","format":"json"}
[2025-12-05 14:44:56] [DEBUG] Filtros aps limpeza | Context: {"search":"maria","limit":50,"offset":0}
[2025-12-05 14:44:56] [DEBUG] Aplicando filtro de busca: 'maria'
[2025-12-05 14:44:56] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-05 14:44:56] [DEBUG] SQL Params | Context: ["%maria%","%maria%","%maria%","%maria%"]
[2025-12-05 14:44:56] [DEBUG] Conversas retornadas do banco: 1
[2025-12-05 14:44:56] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:45:01] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:45:01] [DEBUG] GET params | Context: {"search":"maria"}
[2025-12-05 14:45:01] [DEBUG] Filtros aps limpeza | Context: {"search":"maria","limit":50,"offset":0}
[2025-12-05 14:45:01] [DEBUG] Aplicando filtro de busca: 'maria'
[2025-12-05 14:45:01] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-05 14:45:01] [DEBUG] SQL Params | Context: ["%maria%","%maria%","%maria%","%maria%"]
[2025-12-05 14:45:01] [DEBUG] Conversas retornadas do banco: 1
[2025-12-05 14:45:01] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:45:01] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:45:01] [DEBUG] GET params | Context: {"format":"json"}
[2025-12-05 14:45:01] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:45:01] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:45:03] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:45:03] [DEBUG] GET params | Context: {"search":"ocup","format":"json"}
[2025-12-05 14:45:03] [DEBUG] Filtros aps limpeza | Context: {"search":"ocup","limit":50,"offset":0}
[2025-12-05 14:45:03] [DEBUG] Aplicando filtro de busca: 'ocup'
[2025-12-05 14:45:03] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-05 14:45:03] [DEBUG] SQL Params | Context: ["%ocup%","%ocup%","%ocup%","%ocup%"]
[2025-12-05 14:45:03] [DEBUG] Conversas retornadas do banco: 0
[2025-12-05 14:45:03] [DEBUG] Conversas retornadas do Service: 0
[2025-12-05 14:45:04] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:45:04] [DEBUG] GET params | Context: {"format":"json"}
[2025-12-05 14:45:04] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:45:04] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:45:11] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:45:11] [DEBUG] GET params
[2025-12-05 14:45:11] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:45:11] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:45:21] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:45:21] [DEBUG] GET params
[2025-12-05 14:45:21] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:45:21] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:45:31] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:45:31] [DEBUG] GET params
[2025-12-05 14:45:31] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:45:31] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-05 14:45:31] [DEBUG] SQL Params
[2025-12-05 14:45:31] [DEBUG] Conversas retornadas do banco: 1
[2025-12-05 14:45:31] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:45:41] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:45:41] [DEBUG] GET params
[2025-12-05 14:45:41] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:45:41] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:45:51] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:45:51] [DEBUG] GET params
[2025-12-05 14:45:51] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:45:51] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:46:01] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:46:01] [DEBUG] GET params
[2025-12-05 14:46:01] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:46:01] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:46:26] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:46:26] [DEBUG] GET params
[2025-12-05 14:46:26] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:46:26] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:47:26] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:47:26] [DEBUG] GET params
[2025-12-05 14:47:26] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:47:26] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:48:06] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:48:06] [DEBUG] GET params
[2025-12-05 14:48:06] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:48:06] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:48:11] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:48:11] [DEBUG] GET params
[2025-12-05 14:48:11] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:48:11] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:48:21] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:48:21] [DEBUG] GET params
[2025-12-05 14:48:21] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:48:21] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:48:31] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:48:31] [DEBUG] GET params
[2025-12-05 14:48:31] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:48:31] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:48:41] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:48:41] [DEBUG] GET params
[2025-12-05 14:48:41] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:48:41] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:48:51] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:48:51] [DEBUG] GET params
[2025-12-05 14:48:51] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:48:51] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:49:01] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:49:01] [DEBUG] GET params
[2025-12-05 14:49:01] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:49:01] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:49:26] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:49:26] [DEBUG] GET params
[2025-12-05 14:49:26] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:49:26] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:49:47] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:49:47] [DEBUG] GET params
[2025-12-05 14:49:47] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:49:47] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:49:51] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:49:51] [DEBUG] GET params
[2025-12-05 14:49:51] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:49:51] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:50:01] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:50:01] [DEBUG] GET params
[2025-12-05 14:50:01] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:50:01] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:50:11] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:50:11] [DEBUG] GET params
[2025-12-05 14:50:11] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:50:11] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:50:21] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:50:21] [DEBUG] GET params
[2025-12-05 14:50:21] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:50:21] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:50:31] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:50:31] [DEBUG] GET params
[2025-12-05 14:50:31] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:50:31] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:50:41] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:50:41] [DEBUG] GET params
[2025-12-05 14:50:41] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:50:41] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-05 14:50:41] [DEBUG] SQL Params
[2025-12-05 14:50:41] [DEBUG] Conversas retornadas do banco: 1
[2025-12-05 14:50:41] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:51:26] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:51:26] [DEBUG] GET params
[2025-12-05 14:51:26] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:51:26] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:52:26] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:52:26] [DEBUG] GET params
[2025-12-05 14:52:26] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:52:26] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:52:47] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:52:47] [DEBUG] GET params
[2025-12-05 14:52:47] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:52:47] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:52:51] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:52:51] [DEBUG] GET params
[2025-12-05 14:52:51] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:52:51] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:53:01] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:53:01] [DEBUG] GET params
[2025-12-05 14:53:01] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:53:01] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:53:11] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:53:11] [DEBUG] GET params
[2025-12-05 14:53:11] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:53:11] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:53:21] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:53:21] [DEBUG] GET params
[2025-12-05 14:53:21] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:53:21] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:53:31] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:53:31] [DEBUG] GET params
[2025-12-05 14:53:31] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:53:31] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:53:41] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:53:41] [DEBUG] GET params
[2025-12-05 14:53:41] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:53:41] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:54:26] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:54:26] [DEBUG] GET params
[2025-12-05 14:54:26] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:54:26] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:55:26] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:55:26] [DEBUG] GET params
[2025-12-05 14:55:26] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:55:26] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:56:26] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:56:26] [DEBUG] GET params
[2025-12-05 14:56:26] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:56:26] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-05 14:56:26] [DEBUG] SQL Params
[2025-12-05 14:56:26] [DEBUG] Conversas retornadas do banco: 1
[2025-12-05 14:56:26] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:57:26] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:57:26] [DEBUG] GET params
[2025-12-05 14:57:26] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:57:26] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:58:26] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:58:26] [DEBUG] GET params
[2025-12-05 14:58:26] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:58:26] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 14:59:26] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 14:59:26] [DEBUG] GET params
[2025-12-05 14:59:26] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 14:59:26] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 15:00:26] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 15:00:26] [DEBUG] GET params
[2025-12-05 15:00:26] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 15:00:26] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 15:01:26] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 15:01:26] [DEBUG] GET params
[2025-12-05 15:01:26] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 15:01:26] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 15:02:26] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 15:02:26] [DEBUG] GET params
[2025-12-05 15:02:26] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 15:02:26] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-05 15:02:26] [DEBUG] SQL Params
[2025-12-05 15:02:26] [DEBUG] Conversas retornadas do banco: 1
[2025-12-05 15:02:26] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 15:03:26] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 15:03:26] [DEBUG] GET params
[2025-12-05 15:03:26] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 15:03:26] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 15:04:26] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 15:04:26] [DEBUG] GET params
[2025-12-05 15:04:26] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 15:04:26] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 15:05:26] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 15:05:26] [DEBUG] GET params
[2025-12-05 15:05:26] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 15:05:26] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 15:05:49] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 15:05:49] [DEBUG] GET params
[2025-12-05 15:05:49] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 15:05:49] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 15:05:50] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 15:05:50] [DEBUG] GET params
[2025-12-05 15:05:50] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 15:05:50] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 15:06:00] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 15:06:00] [DEBUG] GET params
[2025-12-05 15:06:00] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 15:06:00] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 15:06:10] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 15:06:10] [DEBUG] GET params
[2025-12-05 15:06:10] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 15:06:10] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 15:06:20] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 15:06:20] [DEBUG] GET params
[2025-12-05 15:06:20] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 15:06:20] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 15:06:30] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 15:06:30] [DEBUG] GET params
[2025-12-05 15:06:30] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 15:06:30] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 15:06:40] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 15:06:40] [DEBUG] GET params
[2025-12-05 15:06:40] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 15:06:40] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 15:06:50] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 15:06:50] [DEBUG] GET params
[2025-12-05 15:06:50] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 15:06:50] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 15:07:26] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 15:07:26] [DEBUG] GET params
[2025-12-05 15:07:26] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 15:07:26] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 15:08:26] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 15:08:26] [DEBUG] GET params
[2025-12-05 15:08:26] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 15:08:26] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-05 15:08:26] [DEBUG] SQL Params
[2025-12-05 15:08:26] [DEBUG] Conversas retornadas do banco: 1
[2025-12-05 15:08:26] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 15:09:26] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 15:09:26] [DEBUG] GET params
[2025-12-05 15:09:26] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 15:09:26] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 15:10:26] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 15:10:26] [DEBUG] GET params
[2025-12-05 15:10:26] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 15:10:26] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 15:11:16] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 15:11:16] [DEBUG] GET params
[2025-12-05 15:11:16] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 15:11:16] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 15:11:17] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 15:11:17] [DEBUG] GET params | Context: {"id":"1"}
[2025-12-05 15:11:17] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 15:11:17] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 15:11:27] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 15:11:27] [DEBUG] GET params
[2025-12-05 15:11:27] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 15:11:27] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 15:11:27] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 15:11:27] [DEBUG] GET params | Context: {"id":"1"}
[2025-12-05 15:11:27] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 15:11:27] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 15:11:37] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 15:11:37] [DEBUG] GET params
[2025-12-05 15:11:37] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 15:11:37] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 15:11:47] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 15:11:47] [DEBUG] GET params
[2025-12-05 15:11:47] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 15:11:47] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 15:11:57] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 15:11:57] [DEBUG] GET params
[2025-12-05 15:11:57] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 15:11:57] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 15:12:07] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 15:12:07] [DEBUG] GET params
[2025-12-05 15:12:07] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 15:12:07] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 15:12:17] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 15:12:17] [DEBUG] GET params
[2025-12-05 15:12:17] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 15:12:17] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 15:12:27] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 15:12:27] [DEBUG] GET params
[2025-12-05 15:12:27] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 15:12:27] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 15:12:37] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 15:12:37] [DEBUG] GET params
[2025-12-05 15:12:37] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 15:12:37] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 15:12:47] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 15:12:47] [DEBUG] GET params
[2025-12-05 15:12:47] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 15:12:47] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 15:12:57] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 15:12:57] [DEBUG] GET params
[2025-12-05 15:12:57] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 15:12:57] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 15:12:59] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 15:12:59] [DEBUG] GET params | Context: {"id":"1"}
[2025-12-05 15:12:59] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 15:12:59] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 15:13:09] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 15:13:09] [DEBUG] GET params
[2025-12-05 15:13:09] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 15:13:09] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 15:13:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 15:13:19] [DEBUG] GET params
[2025-12-05 15:13:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 15:13:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 15:13:29] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 15:13:29] [DEBUG] GET params
[2025-12-05 15:13:29] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 15:13:29] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-05 15:13:29] [DEBUG] SQL Params
[2025-12-05 15:13:29] [DEBUG] Conversas retornadas do banco: 1
[2025-12-05 15:13:29] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 15:13:39] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 15:13:39] [DEBUG] GET params
[2025-12-05 15:13:39] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 15:13:39] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 15:13:47] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 15:13:47] [DEBUG] GET params | Context: {"id":"1"}
[2025-12-05 15:13:47] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 15:13:47] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 15:13:57] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 15:13:57] [DEBUG] GET params
[2025-12-05 15:13:57] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 15:13:57] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 15:14:07] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 15:14:07] [DEBUG] GET params
[2025-12-05 15:14:07] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 15:14:07] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 15:14:12] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 15:14:12] [DEBUG] GET params | Context: {"id":"1"}
[2025-12-05 15:14:12] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 15:14:12] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 15:14:22] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 15:14:22] [DEBUG] GET params
[2025-12-05 15:14:22] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 15:14:22] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 15:14:23] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 15:14:23] [DEBUG] GET params | Context: {"id":"1"}
[2025-12-05 15:14:23] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 15:14:23] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 15:14:24] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 15:14:24] [DEBUG] GET params | Context: {"id":"1"}
[2025-12-05 15:14:24] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 15:14:24] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 15:14:25] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 15:14:25] [DEBUG] GET params | Context: {"id":"1"}
[2025-12-05 15:14:25] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 15:14:25] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 15:14:26] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 15:14:26] [DEBUG] GET params | Context: {"id":"1"}
[2025-12-05 15:14:26] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 15:14:26] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 15:14:26] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 15:14:26] [DEBUG] GET params | Context: {"id":"1"}
[2025-12-05 15:14:26] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 15:14:26] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 15:14:28] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 15:14:28] [DEBUG] GET params | Context: {"id":"1"}
[2025-12-05 15:14:28] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 15:14:28] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 15:14:28] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 15:14:28] [DEBUG] GET params | Context: {"id":"1"}
[2025-12-05 15:14:28] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 15:14:28] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 15:14:29] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 15:14:29] [DEBUG] GET params | Context: {"id":"1"}
[2025-12-05 15:14:29] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 15:14:29] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 15:14:30] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 15:14:30] [DEBUG] GET params | Context: {"id":"1"}
[2025-12-05 15:14:30] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 15:14:30] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 15:14:31] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 15:14:31] [DEBUG] GET params | Context: {"id":"1"}
[2025-12-05 15:14:31] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 15:14:31] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 15:14:32] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 15:14:32] [DEBUG] GET params | Context: {"id":"1"}
[2025-12-05 15:14:32] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 15:14:32] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 15:14:33] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 15:14:33] [DEBUG] GET params | Context: {"id":"1"}
[2025-12-05 15:14:33] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 15:14:33] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 15:14:36] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 15:14:36] [DEBUG] GET params | Context: {"id":"1"}
[2025-12-05 15:14:36] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 15:14:36] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 15:14:42] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 15:14:42] [DEBUG] GET params | Context: {"id":"1"}
[2025-12-05 15:14:42] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 15:14:42] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 15:14:53] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 15:14:53] [DEBUG] GET params
[2025-12-05 15:14:53] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 15:14:53] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 15:15:03] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 15:15:03] [DEBUG] GET params
[2025-12-05 15:15:03] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 15:15:03] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 15:15:13] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 15:15:13] [DEBUG] GET params
[2025-12-05 15:15:13] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 15:15:13] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 15:15:23] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 15:15:23] [DEBUG] GET params
[2025-12-05 15:15:23] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 15:15:23] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 15:15:33] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 15:15:33] [DEBUG] GET params
[2025-12-05 15:15:33] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 15:15:33] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 15:15:43] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 15:15:43] [DEBUG] GET params
[2025-12-05 15:15:43] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 15:15:43] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 15:46:18] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 15:46:18] [DEBUG] GET params
[2025-12-05 15:46:18] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 15:46:18] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-05 15:46:18] [DEBUG] SQL Params
[2025-12-05 15:46:18] [DEBUG] Conversas retornadas do banco: 1
[2025-12-05 15:46:18] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 18:34:24] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 18:34:24] [DEBUG] GET params
[2025-12-05 18:34:24] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 18:34:24] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-05 18:34:24] [DEBUG] SQL Params
[2025-12-05 18:34:24] [DEBUG] Conversas retornadas do banco: 1
[2025-12-05 18:34:24] [DEBUG] Conversas retornadas do Service: 1
[2025-12-05 18:34:35] [DEBUG] ConversationController::index - userId: 1
[2025-12-05 18:34:35] [DEBUG] GET params
[2025-12-05 18:34:35] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-05 18:34:35] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 11:51:40] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 11:51:40] [DEBUG] GET params
[2025-12-06 11:51:40] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 11:51:40] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-06 11:51:40] [DEBUG] SQL Params
[2025-12-06 11:51:41] [DEBUG] Conversas retornadas do banco: 1
[2025-12-06 11:51:41] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 13:54:15] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 13:54:15] [DEBUG] GET params
[2025-12-06 13:54:15] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 13:54:15] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-06 13:54:15] [DEBUG] SQL Params
[2025-12-06 13:54:15] [DEBUG] Conversas retornadas do banco: 1
[2025-12-06 13:54:15] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 13:54:25] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 13:54:25] [DEBUG] GET params
[2025-12-06 13:54:25] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 13:54:25] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 13:54:35] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 13:54:35] [DEBUG] GET params
[2025-12-06 13:54:35] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 13:54:35] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 13:54:45] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 13:54:45] [DEBUG] GET params
[2025-12-06 13:54:45] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 13:54:45] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 13:54:55] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 13:54:55] [DEBUG] GET params
[2025-12-06 13:54:55] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 13:54:55] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 13:55:05] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 13:55:05] [DEBUG] GET params
[2025-12-06 13:55:05] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 13:55:05] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 13:55:15] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 13:55:15] [DEBUG] GET params
[2025-12-06 13:55:15] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 13:55:15] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 13:55:25] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 13:55:25] [DEBUG] GET params
[2025-12-06 13:55:25] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 13:55:25] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 13:55:35] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 13:55:35] [DEBUG] GET params
[2025-12-06 13:55:35] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 13:55:35] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 13:55:45] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 13:55:45] [DEBUG] GET params
[2025-12-06 13:55:45] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 13:55:45] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 13:55:55] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 13:55:55] [DEBUG] GET params
[2025-12-06 13:55:55] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 13:55:55] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 13:56:05] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 13:56:05] [DEBUG] GET params
[2025-12-06 13:56:05] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 13:56:05] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 13:56:15] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 13:56:15] [DEBUG] GET params
[2025-12-06 13:56:15] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 13:56:15] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 13:56:25] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 13:56:25] [DEBUG] GET params
[2025-12-06 13:56:25] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 13:56:25] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 13:56:35] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 13:56:35] [DEBUG] GET params
[2025-12-06 13:56:35] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 13:56:35] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 13:56:45] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 13:56:45] [DEBUG] GET params
[2025-12-06 13:56:45] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 13:56:45] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 13:56:55] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 13:56:55] [DEBUG] GET params
[2025-12-06 13:56:55] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 13:56:55] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 13:57:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 13:57:19] [DEBUG] GET params
[2025-12-06 13:57:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 13:57:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 13:58:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 13:58:19] [DEBUG] GET params
[2025-12-06 13:58:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 13:58:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 13:59:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 13:59:19] [DEBUG] GET params
[2025-12-06 13:59:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 13:59:19] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-06 13:59:19] [DEBUG] SQL Params
[2025-12-06 13:59:19] [DEBUG] Conversas retornadas do banco: 1
[2025-12-06 13:59:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 14:00:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 14:00:19] [DEBUG] GET params
[2025-12-06 14:00:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 14:00:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 14:01:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 14:01:19] [DEBUG] GET params
[2025-12-06 14:01:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 14:01:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 14:02:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 14:02:19] [DEBUG] GET params
[2025-12-06 14:02:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 14:02:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 14:03:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 14:03:19] [DEBUG] GET params
[2025-12-06 14:03:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 14:03:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 14:04:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 14:04:19] [DEBUG] GET params
[2025-12-06 14:04:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 14:04:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 14:05:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 14:05:19] [DEBUG] GET params
[2025-12-06 14:05:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 14:05:19] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-06 14:05:19] [DEBUG] SQL Params
[2025-12-06 14:05:19] [DEBUG] Conversas retornadas do banco: 1
[2025-12-06 14:05:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 14:06:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 14:06:19] [DEBUG] GET params
[2025-12-06 14:06:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 14:06:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 14:07:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 14:07:19] [DEBUG] GET params
[2025-12-06 14:07:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 14:07:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 14:08:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 14:08:19] [DEBUG] GET params
[2025-12-06 14:08:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 14:08:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 14:09:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 14:09:19] [DEBUG] GET params
[2025-12-06 14:09:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 14:09:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 14:10:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 14:10:19] [DEBUG] GET params
[2025-12-06 14:10:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 14:10:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 14:11:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 14:11:19] [DEBUG] GET params
[2025-12-06 14:11:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 14:11:19] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-06 14:11:19] [DEBUG] SQL Params
[2025-12-06 14:11:19] [DEBUG] Conversas retornadas do banco: 1
[2025-12-06 14:11:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 14:12:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 14:12:19] [DEBUG] GET params
[2025-12-06 14:12:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 14:12:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 14:13:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 14:13:19] [DEBUG] GET params
[2025-12-06 14:13:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 14:13:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 14:14:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 14:14:19] [DEBUG] GET params
[2025-12-06 14:14:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 14:14:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 14:15:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 14:15:19] [DEBUG] GET params
[2025-12-06 14:15:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 14:15:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 14:16:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 14:16:19] [DEBUG] GET params
[2025-12-06 14:16:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 14:16:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 14:17:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 14:17:19] [DEBUG] GET params
[2025-12-06 14:17:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 14:17:19] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-06 14:17:19] [DEBUG] SQL Params
[2025-12-06 14:17:19] [DEBUG] Conversas retornadas do banco: 1
[2025-12-06 14:17:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 14:18:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 14:18:19] [DEBUG] GET params
[2025-12-06 14:18:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 14:18:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 14:19:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 14:19:19] [DEBUG] GET params
[2025-12-06 14:19:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 14:19:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 14:20:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 14:20:19] [DEBUG] GET params
[2025-12-06 14:20:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 14:20:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 14:21:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 14:21:19] [DEBUG] GET params
[2025-12-06 14:21:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 14:21:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 14:22:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 14:22:19] [DEBUG] GET params
[2025-12-06 14:22:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 14:22:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 14:23:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 14:23:19] [DEBUG] GET params
[2025-12-06 14:23:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 14:23:19] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-06 14:23:19] [DEBUG] SQL Params
[2025-12-06 14:23:19] [DEBUG] Conversas retornadas do banco: 1
[2025-12-06 14:23:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 14:24:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 14:24:19] [DEBUG] GET params
[2025-12-06 14:24:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 14:24:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 14:25:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 14:25:19] [DEBUG] GET params
[2025-12-06 14:25:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 14:25:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 14:26:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 14:26:19] [DEBUG] GET params
[2025-12-06 14:26:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 14:26:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 14:27:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 14:27:19] [DEBUG] GET params
[2025-12-06 14:27:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 14:27:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 14:28:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 14:28:19] [DEBUG] GET params
[2025-12-06 14:28:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 14:28:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 14:29:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 14:29:19] [DEBUG] GET params
[2025-12-06 14:29:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 14:29:19] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-06 14:29:19] [DEBUG] SQL Params
[2025-12-06 14:29:19] [DEBUG] Conversas retornadas do banco: 1
[2025-12-06 14:29:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 14:30:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 14:30:19] [DEBUG] GET params
[2025-12-06 14:30:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 14:30:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 14:31:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 14:31:19] [DEBUG] GET params
[2025-12-06 14:31:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 14:31:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 14:32:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 14:32:19] [DEBUG] GET params
[2025-12-06 14:32:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 14:32:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 14:33:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 14:33:19] [DEBUG] GET params
[2025-12-06 14:33:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 14:33:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 14:34:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 14:34:19] [DEBUG] GET params
[2025-12-06 14:34:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 14:34:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 14:35:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 14:35:19] [DEBUG] GET params
[2025-12-06 14:35:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 14:35:19] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-06 14:35:19] [DEBUG] SQL Params
[2025-12-06 14:35:19] [DEBUG] Conversas retornadas do banco: 1
[2025-12-06 14:35:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 14:36:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 14:36:19] [DEBUG] GET params
[2025-12-06 14:36:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 14:36:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 14:37:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 14:37:19] [DEBUG] GET params
[2025-12-06 14:37:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 14:37:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 14:38:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 14:38:19] [DEBUG] GET params
[2025-12-06 14:38:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 14:38:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 14:39:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 14:39:19] [DEBUG] GET params
[2025-12-06 14:39:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 14:39:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 14:40:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 14:40:19] [DEBUG] GET params
[2025-12-06 14:40:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 14:40:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 14:41:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 14:41:19] [DEBUG] GET params
[2025-12-06 14:41:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 14:41:19] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-06 14:41:19] [DEBUG] SQL Params
[2025-12-06 14:41:19] [DEBUG] Conversas retornadas do banco: 1
[2025-12-06 14:41:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 14:42:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 14:42:19] [DEBUG] GET params
[2025-12-06 14:42:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 14:42:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 14:43:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 14:43:19] [DEBUG] GET params
[2025-12-06 14:43:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 14:43:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 14:44:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 14:44:19] [DEBUG] GET params
[2025-12-06 14:44:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 14:44:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 14:45:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 14:45:19] [DEBUG] GET params
[2025-12-06 14:45:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 14:45:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 14:46:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 14:46:19] [DEBUG] GET params
[2025-12-06 14:46:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 14:46:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 14:47:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 14:47:19] [DEBUG] GET params
[2025-12-06 14:47:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 14:47:19] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-06 14:47:19] [DEBUG] SQL Params
[2025-12-06 14:47:19] [DEBUG] Conversas retornadas do banco: 1
[2025-12-06 14:47:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 14:48:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 14:48:19] [DEBUG] GET params
[2025-12-06 14:48:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 14:48:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 14:48:32] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 14:48:32] [DEBUG] GET params
[2025-12-06 14:48:32] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 14:48:32] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 14:48:35] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 14:48:35] [DEBUG] GET params
[2025-12-06 14:48:35] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 14:48:35] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 14:48:45] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 14:48:45] [DEBUG] GET params
[2025-12-06 14:48:45] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 14:48:45] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 14:48:55] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 14:48:55] [DEBUG] GET params
[2025-12-06 14:48:55] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 14:48:55] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 14:49:05] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 14:49:05] [DEBUG] GET params
[2025-12-06 14:49:05] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 14:49:05] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 14:49:15] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 14:49:15] [DEBUG] GET params
[2025-12-06 14:49:15] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 14:49:15] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 14:49:25] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 14:49:25] [DEBUG] GET params
[2025-12-06 14:49:25] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 14:49:25] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 14:50:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 14:50:19] [DEBUG] GET params
[2025-12-06 14:50:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 14:50:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 14:50:25] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 14:50:25] [DEBUG] GET params
[2025-12-06 14:50:25] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 14:50:25] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 14:50:35] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 14:50:35] [DEBUG] GET params
[2025-12-06 14:50:35] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 14:50:35] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 14:50:45] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 14:50:45] [DEBUG] GET params
[2025-12-06 14:50:45] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 14:50:45] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 14:50:55] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 14:50:55] [DEBUG] GET params
[2025-12-06 14:50:55] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 14:50:55] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 14:51:05] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 14:51:05] [DEBUG] GET params
[2025-12-06 14:51:05] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 14:51:05] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 14:57:25] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 14:57:25] [DEBUG] GET params
[2025-12-06 14:57:25] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 14:57:25] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-06 14:57:25] [DEBUG] SQL Params
[2025-12-06 14:57:25] [DEBUG] Conversas retornadas do banco: 1
[2025-12-06 14:57:25] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 14:57:35] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 14:57:35] [DEBUG] GET params | Context: {"id":"1"}
[2025-12-06 14:57:35] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 14:57:35] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 15:05:15] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 15:05:15] [DEBUG] GET params
[2025-12-06 15:05:15] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 15:05:15] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-06 15:05:15] [DEBUG] SQL Params
[2025-12-06 15:05:15] [DEBUG] Conversas retornadas do banco: 1
[2025-12-06 15:05:15] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 15:11:03] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 15:11:03] [DEBUG] GET params
[2025-12-06 15:11:03] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 15:11:03] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-06 15:11:03] [DEBUG] SQL Params
[2025-12-06 15:11:03] [DEBUG] Conversas retornadas do banco: 1
[2025-12-06 15:11:03] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 15:19:17] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 15:19:17] [DEBUG] GET params
[2025-12-06 15:19:17] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 15:19:17] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-06 15:19:17] [DEBUG] SQL Params
[2025-12-06 15:19:17] [DEBUG] Conversas retornadas do banco: 1
[2025-12-06 15:19:17] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 15:49:51] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 15:49:51] [DEBUG] GET params
[2025-12-06 15:49:51] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 15:49:51] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-06 15:49:51] [DEBUG] SQL Params
[2025-12-06 15:49:51] [DEBUG] Conversas retornadas do banco: 1
[2025-12-06 15:49:51] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 15:51:23] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 15:51:23] [DEBUG] GET params
[2025-12-06 15:51:23] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 15:51:23] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 15:51:47] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 15:51:47] [DEBUG] GET params
[2025-12-06 15:51:47] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 15:51:47] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 15:53:22] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 15:53:22] [DEBUG] GET params
[2025-12-06 15:53:22] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 15:53:22] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 15:55:21] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 15:55:21] [DEBUG] GET params
[2025-12-06 15:55:21] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 15:55:21] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-06 15:55:21] [DEBUG] SQL Params
[2025-12-06 15:55:21] [DEBUG] Conversas retornadas do banco: 1
[2025-12-06 15:55:21] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:02:01] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:02:01] [DEBUG] GET params
[2025-12-06 16:02:01] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:02:01] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-06 16:02:01] [DEBUG] SQL Params
[2025-12-06 16:02:01] [DEBUG] Conversas retornadas do banco: 1
[2025-12-06 16:02:01] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:04:06] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:04:06] [DEBUG] GET params
[2025-12-06 16:04:06] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:04:06] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:09:15] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:09:15] [DEBUG] GET params
[2025-12-06 16:09:15] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:09:15] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-06 16:09:15] [DEBUG] SQL Params
[2025-12-06 16:09:15] [DEBUG] Conversas retornadas do banco: 1
[2025-12-06 16:09:15] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:09:22] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:09:22] [DEBUG] GET params
[2025-12-06 16:09:22] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:09:22] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:09:27] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:09:27] [DEBUG] GET params
[2025-12-06 16:09:27] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:09:27] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:11:59] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:11:59] [DEBUG] GET params
[2025-12-06 16:11:59] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:11:59] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:12:43] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:12:43] [DEBUG] GET params
[2025-12-06 16:12:43] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:12:43] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:13:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:13:19] [DEBUG] GET params
[2025-12-06 16:13:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:13:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:13:26] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:13:26] [DEBUG] GET params
[2025-12-06 16:13:26] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:13:26] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:13:29] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:13:29] [DEBUG] GET params
[2025-12-06 16:13:29] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:13:29] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:21:36] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:21:36] [DEBUG] GET params
[2025-12-06 16:21:36] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:21:36] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-06 16:21:36] [DEBUG] SQL Params
[2025-12-06 16:21:36] [DEBUG] Conversas retornadas do banco: 1
[2025-12-06 16:21:36] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:22:26] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:22:26] [DEBUG] GET params
[2025-12-06 16:22:26] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:22:26] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:30:24] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:30:24] [DEBUG] GET params
[2025-12-06 16:30:24] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:30:24] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-06 16:30:24] [DEBUG] SQL Params
[2025-12-06 16:30:24] [DEBUG] Conversas retornadas do banco: 1
[2025-12-06 16:30:24] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:30:26] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:30:26] [DEBUG] GET params
[2025-12-06 16:30:26] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:30:26] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:31:13] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:31:13] [DEBUG] GET params
[2025-12-06 16:31:13] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:31:13] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:35:14] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:35:14] [DEBUG] GET params
[2025-12-06 16:35:14] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:35:14] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:35:25] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:35:25] [DEBUG] GET params
[2025-12-06 16:35:25] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:35:25] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-06 16:35:25] [DEBUG] SQL Params
[2025-12-06 16:35:25] [DEBUG] Conversas retornadas do banco: 1
[2025-12-06 16:35:25] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:35:35] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:35:35] [DEBUG] GET params
[2025-12-06 16:35:35] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:35:35] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:35:44] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:35:44] [DEBUG] GET params
[2025-12-06 16:35:44] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:35:44] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:35:55] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:35:55] [DEBUG] GET params
[2025-12-06 16:35:55] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:35:55] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:36:05] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:36:05] [DEBUG] GET params
[2025-12-06 16:36:05] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:36:05] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:36:15] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:36:15] [DEBUG] GET params
[2025-12-06 16:36:15] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:36:15] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:36:25] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:36:25] [DEBUG] GET params
[2025-12-06 16:36:25] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:36:25] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:36:35] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:36:35] [DEBUG] GET params
[2025-12-06 16:36:35] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:36:35] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:36:45] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:36:45] [DEBUG] GET params
[2025-12-06 16:36:45] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:36:45] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:36:55] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:36:55] [DEBUG] GET params
[2025-12-06 16:36:55] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:36:55] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:37:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:37:19] [DEBUG] GET params
[2025-12-06 16:37:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:37:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:38:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:38:19] [DEBUG] GET params
[2025-12-06 16:38:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:38:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:38:41] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:38:41] [DEBUG] GET params
[2025-12-06 16:38:41] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:38:41] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:38:42] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:38:42] [DEBUG] GET params
[2025-12-06 16:38:42] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:38:42] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:38:44] [ERROR] Erro em ConversationController::show(1): SQLSTATE[42S22]: Column not found: 1054 Unknown column 'm.ai_agent_id' in 'field list'
[2025-12-06 16:38:44] [ERROR] Stack trace: #0 C:\laragon\www\chat\app\Helpers\Database.php(62): PDO->prepare('SELECT m.*, \r\n ...')
#1 C:\laragon\www\chat\app\Helpers\Database.php(82): App\Helpers\Database::query('SELECT m.*, \r\n ...', Array)
#2 C:\laragon\www\chat\app\Models\Message.php(91): App\Helpers\Database::fetchAll('SELECT m.*, \r\n ...', Array)
#3 C:\laragon\www\chat\app\Services\ConversationService.php(304): App\Models\Message::getMessagesWithSenderDetails(1)
#4 C:\laragon\www\chat\app\Controllers\ConversationController.php(540): App\Services\ConversationService::getConversation(1)
#5 [internal function]: App\Controllers\ConversationController->show(1)
#6 C:\laragon\www\chat\app\Helpers\Router.php(209): call_user_func_array(Array, Array)
#7 C:\laragon\www\chat\app\Helpers\Router.php(133): App\Helpers\Router::callController(Array, Array)
#8 C:\laragon\www\chat\public\index.php(32): App\Helpers\Router::dispatch()
#9 {main}
[2025-12-06 16:39:03] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:39:03] [DEBUG] GET params
[2025-12-06 16:39:03] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:39:03] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:39:03] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:39:03] [DEBUG] GET params
[2025-12-06 16:39:03] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:39:03] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:39:04] [ERROR] Erro em ConversationController::show(1): SQLSTATE[42S22]: Column not found: 1054 Unknown column 'm.ai_agent_id' in 'field list'
[2025-12-06 16:39:04] [ERROR] Stack trace: #0 C:\laragon\www\chat\app\Helpers\Database.php(62): PDO->prepare('SELECT m.*, \r\n ...')
#1 C:\laragon\www\chat\app\Helpers\Database.php(82): App\Helpers\Database::query('SELECT m.*, \r\n ...', Array)
#2 C:\laragon\www\chat\app\Models\Message.php(91): App\Helpers\Database::fetchAll('SELECT m.*, \r\n ...', Array)
#3 C:\laragon\www\chat\app\Services\ConversationService.php(304): App\Models\Message::getMessagesWithSenderDetails(1)
#4 C:\laragon\www\chat\app\Controllers\ConversationController.php(540): App\Services\ConversationService::getConversation(1)
#5 [internal function]: App\Controllers\ConversationController->show(1)
#6 C:\laragon\www\chat\app\Helpers\Router.php(209): call_user_func_array(Array, Array)
#7 C:\laragon\www\chat\app\Helpers\Router.php(133): App\Helpers\Router::callController(Array, Array)
#8 C:\laragon\www\chat\public\index.php(32): App\Helpers\Router::dispatch()
#9 {main}
[2025-12-06 16:39:23] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:39:23] [DEBUG] GET params
[2025-12-06 16:39:23] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:39:23] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:39:33] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:39:33] [DEBUG] GET params
[2025-12-06 16:39:33] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:39:33] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:39:43] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:39:43] [DEBUG] GET params
[2025-12-06 16:39:43] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:39:43] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:39:53] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:39:53] [DEBUG] GET params
[2025-12-06 16:39:53] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:39:53] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:40:03] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:40:03] [DEBUG] GET params
[2025-12-06 16:40:03] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:40:03] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:40:13] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:40:13] [DEBUG] GET params
[2025-12-06 16:40:13] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:40:13] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:40:23] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:40:23] [DEBUG] GET params
[2025-12-06 16:40:23] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:40:23] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:40:47] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:40:47] [DEBUG] GET params
[2025-12-06 16:40:47] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:40:47] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-06 16:40:47] [DEBUG] SQL Params
[2025-12-06 16:40:47] [DEBUG] Conversas retornadas do banco: 1
[2025-12-06 16:40:47] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:40:47] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:40:47] [DEBUG] GET params
[2025-12-06 16:40:47] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:40:47] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:40:58] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:40:58] [DEBUG] GET params
[2025-12-06 16:40:58] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:40:58] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:41:08] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:41:08] [DEBUG] GET params
[2025-12-06 16:41:08] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:41:08] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:41:18] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:41:18] [DEBUG] GET params
[2025-12-06 16:41:18] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:41:18] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:41:28] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:41:28] [DEBUG] GET params
[2025-12-06 16:41:28] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:41:28] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:41:38] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:41:38] [DEBUG] GET params
[2025-12-06 16:41:38] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:41:38] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:41:48] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:41:48] [DEBUG] GET params
[2025-12-06 16:41:48] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:41:48] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:41:58] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:41:58] [DEBUG] GET params
[2025-12-06 16:41:58] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:41:58] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:42:08] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:42:08] [DEBUG] GET params
[2025-12-06 16:42:08] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:42:08] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:42:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:42:19] [DEBUG] GET params
[2025-12-06 16:42:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:42:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:43:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:43:19] [DEBUG] GET params
[2025-12-06 16:43:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:43:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:44:07] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:44:07] [DEBUG] GET params
[2025-12-06 16:44:07] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:44:07] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:44:08] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:44:08] [DEBUG] GET params
[2025-12-06 16:44:08] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:44:08] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:44:08] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:44:08] [DEBUG] GET params | Context: {"id":"1"}
[2025-12-06 16:44:08] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:44:08] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:44:18] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:44:18] [DEBUG] GET params
[2025-12-06 16:44:18] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:44:18] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:44:29] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:44:29] [DEBUG] GET params
[2025-12-06 16:44:29] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:44:29] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:44:39] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:44:39] [DEBUG] GET params
[2025-12-06 16:44:39] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:44:39] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:44:49] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:44:49] [DEBUG] GET params
[2025-12-06 16:44:49] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:44:49] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:44:59] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:44:59] [DEBUG] GET params
[2025-12-06 16:44:59] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:44:59] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:45:09] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:45:09] [DEBUG] GET params
[2025-12-06 16:45:09] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:45:09] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:45:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:45:19] [DEBUG] GET params
[2025-12-06 16:45:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:45:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:45:29] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:45:29] [DEBUG] GET params
[2025-12-06 16:45:29] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:45:29] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:45:39] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:45:39] [DEBUG] GET params
[2025-12-06 16:45:39] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:45:39] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:45:49] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:45:49] [DEBUG] GET params
[2025-12-06 16:45:49] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:45:49] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-06 16:45:49] [DEBUG] SQL Params
[2025-12-06 16:45:49] [DEBUG] Conversas retornadas do banco: 1
[2025-12-06 16:45:49] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:45:59] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:45:59] [DEBUG] GET params
[2025-12-06 16:45:59] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:45:59] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:46:09] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:46:09] [DEBUG] GET params
[2025-12-06 16:46:09] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:46:09] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:46:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:46:19] [DEBUG] GET params
[2025-12-06 16:46:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:46:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:47:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:47:19] [DEBUG] GET params
[2025-12-06 16:47:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:47:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:48:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:48:19] [DEBUG] GET params
[2025-12-06 16:48:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:48:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:49:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:49:19] [DEBUG] GET params
[2025-12-06 16:49:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:49:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:50:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:50:19] [DEBUG] GET params
[2025-12-06 16:50:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:50:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:51:14] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:51:14] [DEBUG] GET params
[2025-12-06 16:51:14] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:51:14] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-06 16:51:14] [DEBUG] SQL Params
[2025-12-06 16:51:14] [DEBUG] Conversas retornadas do banco: 1
[2025-12-06 16:51:14] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:51:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:51:19] [DEBUG] GET params
[2025-12-06 16:51:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:51:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:51:29] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:51:29] [DEBUG] GET params
[2025-12-06 16:51:29] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:51:29] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:51:39] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:51:39] [DEBUG] GET params
[2025-12-06 16:51:39] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:51:39] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:51:49] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:51:49] [DEBUG] GET params
[2025-12-06 16:51:49] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:51:49] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:51:59] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:51:59] [DEBUG] GET params
[2025-12-06 16:51:59] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:51:59] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:52:09] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:52:09] [DEBUG] GET params
[2025-12-06 16:52:09] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:52:09] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:52:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:52:19] [DEBUG] GET params
[2025-12-06 16:52:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:52:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:53:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:53:19] [DEBUG] GET params
[2025-12-06 16:53:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:53:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:53:32] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:53:32] [DEBUG] GET params
[2025-12-06 16:53:32] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:53:32] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:53:39] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:53:39] [DEBUG] GET params
[2025-12-06 16:53:39] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:53:39] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:53:49] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:53:49] [DEBUG] GET params
[2025-12-06 16:53:49] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:53:49] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:53:59] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:53:59] [DEBUG] GET params
[2025-12-06 16:53:59] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:53:59] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:54:09] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:54:09] [DEBUG] GET params
[2025-12-06 16:54:09] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:54:09] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:54:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:54:19] [DEBUG] GET params
[2025-12-06 16:54:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:54:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:54:29] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:54:29] [DEBUG] GET params
[2025-12-06 16:54:29] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:54:29] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:55:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:55:19] [DEBUG] GET params
[2025-12-06 16:55:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:55:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:56:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:56:19] [DEBUG] GET params
[2025-12-06 16:56:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:56:19] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-06 16:56:19] [DEBUG] SQL Params
[2025-12-06 16:56:19] [DEBUG] Conversas retornadas do banco: 1
[2025-12-06 16:56:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:56:29] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:56:29] [DEBUG] GET params
[2025-12-06 16:56:29] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:56:29] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:56:39] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:56:39] [DEBUG] GET params
[2025-12-06 16:56:39] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:56:39] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:56:49] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:56:49] [DEBUG] GET params
[2025-12-06 16:56:49] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:56:49] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:56:59] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:56:59] [DEBUG] GET params
[2025-12-06 16:56:59] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:56:59] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:57:09] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:57:09] [DEBUG] GET params
[2025-12-06 16:57:09] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:57:09] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:57:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:57:19] [DEBUG] GET params
[2025-12-06 16:57:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:57:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:57:44] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:57:44] [DEBUG] GET params
[2025-12-06 16:57:44] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:57:44] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:57:49] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:57:49] [DEBUG] GET params
[2025-12-06 16:57:49] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:57:49] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:57:59] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:57:59] [DEBUG] GET params
[2025-12-06 16:57:59] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:57:59] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:58:09] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:58:09] [DEBUG] GET params
[2025-12-06 16:58:09] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:58:09] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:58:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:58:19] [DEBUG] GET params
[2025-12-06 16:58:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:58:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:58:29] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:58:29] [DEBUG] GET params
[2025-12-06 16:58:29] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:58:29] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:58:39] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:58:39] [DEBUG] GET params
[2025-12-06 16:58:39] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:58:39] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:58:49] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:58:49] [DEBUG] GET params
[2025-12-06 16:58:49] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:58:49] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:58:59] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:58:59] [DEBUG] GET params
[2025-12-06 16:58:59] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:58:59] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:59:09] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:59:09] [DEBUG] GET params
[2025-12-06 16:59:09] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:59:09] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:59:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:59:19] [DEBUG] GET params
[2025-12-06 16:59:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:59:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:59:29] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:59:29] [DEBUG] GET params
[2025-12-06 16:59:29] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:59:29] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 16:59:39] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 16:59:39] [DEBUG] GET params
[2025-12-06 16:59:39] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 16:59:39] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 17:00:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 17:00:19] [DEBUG] GET params
[2025-12-06 17:00:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 17:00:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 17:01:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 17:01:19] [DEBUG] GET params
[2025-12-06 17:01:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 17:01:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 17:02:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 17:02:19] [DEBUG] GET params
[2025-12-06 17:02:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 17:02:19] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-06 17:02:19] [DEBUG] SQL Params
[2025-12-06 17:02:19] [DEBUG] Conversas retornadas do banco: 1
[2025-12-06 17:02:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 17:03:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 17:03:19] [DEBUG] GET params
[2025-12-06 17:03:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 17:03:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 17:04:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 17:04:19] [DEBUG] GET params
[2025-12-06 17:04:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 17:04:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 17:04:40] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 17:04:40] [DEBUG] GET params
[2025-12-06 17:04:40] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 17:04:40] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 17:04:42] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 17:04:42] [DEBUG] GET params | Context: {"id":"1"}
[2025-12-06 17:04:42] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 17:04:42] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 17:04:53] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 17:04:53] [DEBUG] GET params
[2025-12-06 17:04:53] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 17:04:53] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 17:05:03] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 17:05:03] [DEBUG] GET params
[2025-12-06 17:05:03] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 17:05:03] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 17:05:13] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 17:05:13] [DEBUG] GET params
[2025-12-06 17:05:13] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 17:05:13] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 17:05:23] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 17:05:23] [DEBUG] GET params
[2025-12-06 17:05:23] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 17:05:23] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 17:05:33] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 17:05:33] [DEBUG] GET params
[2025-12-06 17:05:33] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 17:05:33] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 17:05:43] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 17:05:43] [DEBUG] GET params
[2025-12-06 17:05:43] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 17:05:43] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 17:05:53] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 17:05:53] [DEBUG] GET params
[2025-12-06 17:05:53] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 17:05:53] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 17:06:03] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 17:06:03] [DEBUG] GET params
[2025-12-06 17:06:03] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 17:06:03] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 17:06:13] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 17:06:13] [DEBUG] GET params
[2025-12-06 17:06:13] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 17:06:13] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 17:06:23] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 17:06:23] [DEBUG] GET params
[2025-12-06 17:06:23] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 17:06:23] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 17:06:33] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 17:06:33] [DEBUG] GET params
[2025-12-06 17:06:33] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 17:06:33] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 17:07:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 17:07:19] [DEBUG] GET params
[2025-12-06 17:07:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 17:07:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 17:08:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 17:08:19] [DEBUG] GET params
[2025-12-06 17:08:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 17:08:19] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-06 17:08:19] [DEBUG] SQL Params
[2025-12-06 17:08:19] [DEBUG] Conversas retornadas do banco: 1
[2025-12-06 17:08:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 17:09:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 17:09:19] [DEBUG] GET params
[2025-12-06 17:09:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 17:09:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 17:10:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 17:10:19] [DEBUG] GET params
[2025-12-06 17:10:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 17:10:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 17:11:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 17:11:19] [DEBUG] GET params
[2025-12-06 17:11:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 17:11:19] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 17:11:25] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 17:11:25] [DEBUG] GET params
[2025-12-06 17:11:25] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 17:11:25] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 17:11:33] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 17:11:33] [DEBUG] GET params
[2025-12-06 17:11:33] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 17:11:33] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 17:11:43] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 17:11:43] [DEBUG] GET params
[2025-12-06 17:11:43] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 17:11:43] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 17:11:53] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 17:11:53] [DEBUG] GET params
[2025-12-06 17:11:53] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 17:11:53] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 17:12:03] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 17:12:03] [DEBUG] GET params
[2025-12-06 17:12:03] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 17:12:03] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 17:12:13] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 17:12:13] [DEBUG] GET params
[2025-12-06 17:12:13] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 17:12:13] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 17:12:23] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 17:12:23] [DEBUG] GET params
[2025-12-06 17:12:23] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 17:12:23] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 17:12:33] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 17:12:33] [DEBUG] GET params
[2025-12-06 17:12:33] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 17:12:33] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 17:12:43] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 17:12:43] [DEBUG] GET params
[2025-12-06 17:12:43] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 17:12:43] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 17:12:53] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 17:12:53] [DEBUG] GET params
[2025-12-06 17:12:53] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 17:12:53] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 17:13:03] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 17:13:03] [DEBUG] GET params
[2025-12-06 17:13:03] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 17:13:03] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 17:13:13] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 17:13:13] [DEBUG] GET params
[2025-12-06 17:13:13] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 17:13:13] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 17:13:23] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 17:13:23] [DEBUG] GET params
[2025-12-06 17:13:23] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 17:13:23] [DEBUG] SQL Query: SELECT c.*, 
                       ct.name as contact_name, ct.phone as contact_phone, ct.email as contact_email, ct.avatar as contact_avatar,
                       u.name as agent_name, u.email as agent_email,
                       (SELECT COUNT(*) FROM messages m WHERE m.conversation_id = c.id AND m.sender_type = 'contact' AND m.read_at IS NULL) as unread_count,
                       (SELECT content FROM messages m WHERE m.conversation_id = c.id ORDER BY m.created_at DESC LIMIT 1) as l
[2025-12-06 17:13:23] [DEBUG] SQL Params
[2025-12-06 17:13:23] [DEBUG] Conversas retornadas do banco: 1
[2025-12-06 17:13:23] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 17:13:33] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 17:13:33] [DEBUG] GET params
[2025-12-06 17:13:33] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 17:13:33] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 17:13:43] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 17:13:43] [DEBUG] GET params
[2025-12-06 17:13:43] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 17:13:43] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 17:13:53] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 17:13:53] [DEBUG] GET params
[2025-12-06 17:13:53] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 17:13:53] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 17:14:03] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 17:14:03] [DEBUG] GET params
[2025-12-06 17:14:03] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 17:14:03] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 17:14:13] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 17:14:13] [DEBUG] GET params
[2025-12-06 17:14:13] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 17:14:13] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 17:14:59] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 17:14:59] [DEBUG] GET params
[2025-12-06 17:14:59] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 17:14:59] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 17:15:03] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 17:15:03] [DEBUG] GET params
[2025-12-06 17:15:03] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 17:15:03] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 17:15:13] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 17:15:13] [DEBUG] GET params
[2025-12-06 17:15:13] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 17:15:13] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 17:15:23] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 17:15:23] [DEBUG] GET params
[2025-12-06 17:15:23] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 17:15:23] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 17:15:33] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 17:15:33] [DEBUG] GET params
[2025-12-06 17:15:33] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 17:15:33] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 17:15:43] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 17:15:43] [DEBUG] GET params
[2025-12-06 17:15:43] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 17:15:43] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 17:15:53] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 17:15:53] [DEBUG] GET params
[2025-12-06 17:15:53] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 17:15:53] [DEBUG] Conversas retornadas do Service: 1
[2025-12-06 17:16:19] [DEBUG] ConversationController::index - userId: 1
[2025-12-06 17:16:19] [DEBUG] GET params
[2025-12-06 17:16:19] [DEBUG] Filtros aps limpeza | Context: {"limit":50,"offset":0}
[2025-12-06 17:16:19] [DEBUG] Conversas retornadas do Service: 1
